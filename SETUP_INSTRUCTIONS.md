# üõ†Ô∏è INSTRUCCIONES DE CONFIGURACI√ìN - VOTETOK

## üîß Soluci√≥n de Problemas Detectados

### 1. ‚ùå Error: "pnpm no se reconoce"

**Problema:** pnpm no est√° instalado en tu sistema.

**Soluci√≥n:**
```bash
# Opci√≥n 1: Instalar con npm (recomendado)
npm install -g pnpm@8

# Opci√≥n 2: Usar npm directamente
# Reemplaza todos los comandos 'pnpm' por 'npm'
npm install
npm run dev
```

### 2. ‚ùå Error: "Docker Desktop no puede conectar"

**Problema:** Docker Desktop no est√° corriendo o no est√° instalado correctamente.

**Soluciones:**

1. **Si tienes Docker Desktop instalado:**
   - Abre Docker Desktop manualmente
   - Espera a que aparezca "Docker Desktop is running" 
   - Intenta de nuevo: `docker-compose up -d postgres redis`

2. **Si NO tienes Docker instalado:**
   - La app funcionar√° con SQLite local (sin configuraci√≥n adicional)
   - O puedes instalar Docker Desktop desde: https://www.docker.com/products/docker-desktop/

3. **Si Docker sigue sin funcionar:**
   - Reinicia tu computadora
   - Abre Docker Desktop como Administrador
   - Verifica que WSL2 est√© habilitado (en Windows)

### 3. ‚ùå Error en script PowerShell

**Problema:** El script ten√≠a errores de sintaxis.

**Soluci√≥n:** He creado scripts corregidos. Usa uno de estos:

---

## ‚úÖ INSTALACI√ìN PASO A PASO (SIMPLIFICADA)

### Opci√≥n A: Usar el script .BAT (M√ÅS SIMPLE)

```cmd
# En Command Prompt o PowerShell:
install.bat
```

### Opci√≥n B: Usar PowerShell

```powershell
# En PowerShell:
.\install.ps1
```

### Opci√≥n C: Instalaci√≥n Manual

```bash
# 1. Instalar pnpm (si no lo tienes)
npm install -g pnpm@8

# 2. Instalar dependencias
pnpm install
# O si pnpm no funciona:
npm install

# 3. Copiar configuraci√≥n
copy .env.example .env.local

# 4. Generar Prisma Client
npx prisma generate

# 5. Iniciar desarrollo
pnpm dev
# O si pnpm no funciona:
npm run dev
```

---

## üìã CHECKLIST DE VERIFICACI√ìN

Antes de empezar, verifica que tienes:

- [ ] **Node.js instalado** (v18 o superior)
  ```bash
  node --version  # Debe mostrar v18.x.x o superior
  ```

- [ ] **NPM funcionando**
  ```bash
  npm --version   # Debe mostrar un n√∫mero de versi√≥n
  ```

- [ ] **Docker Desktop** (OPCIONAL)
  - Si lo tienes: √°brelo y espera a que est√© corriendo
  - Si NO lo tienes: la app funcionar√° con SQLite local

---

## üöÄ INICIO R√ÅPIDO SIN DOCKER

Si NO tienes Docker o est√° dando problemas:

1. **Instalar dependencias:**
   ```bash
   npm install
   ```

2. **Configurar base de datos SQLite:**
   
   Edita `.env.local` y aseg√∫rate de que tiene:
   ```env
   DATABASE_URL="file:./prisma/dev.db"
   ```

3. **Crear base de datos:**
   ```bash
   npx prisma migrate dev --name init
   ```

4. **Iniciar aplicaci√≥n:**
   ```bash
   npm run dev
   ```

5. **Abrir en navegador:**
   ```
   http://localhost:5173
   ```

---

## üê≥ INICIO CON DOCKER (RECOMENDADO)

Si Docker Desktop est√° funcionando:

1. **Verificar Docker:**
   ```bash
   docker --version
   docker ps
   ```

2. **Levantar servicios:**
   ```bash
   docker-compose up -d postgres redis
   ```

3. **Configurar .env.local:**
   ```env
   DATABASE_URL="postgresql://votetok:votetok_pass@localhost:5432/votetok_db"
   REDIS_URL="redis://localhost:6379"
   ```

4. **Aplicar migraciones:**
   ```bash
   npx prisma migrate dev
   ```

5. **Iniciar aplicaci√≥n:**
   ```bash
   npm run dev
   ```

---

## ‚ùì PREGUNTAS FRECUENTES

### ¬øQu√© hacer si npm/pnpm da error de permisos?

**Windows:**
- Abre PowerShell como Administrador
- Ejecuta: `Set-ExecutionPolicy RemoteSigned -Scope CurrentUser`

**Alternativa:**
- Usa npm sin instalaci√≥n global: `npx pnpm install`

### ¬øC√≥mo saber si Docker est√° funcionando?

Ejecuta:
```bash
docker ps
```

Si muestra una tabla (aunque est√© vac√≠a), Docker est√° funcionando.
Si da error, Docker no est√° corriendo.

### ¬øPuedo usar la app sin Docker?

¬°S√≠! La app funcionar√° perfectamente con SQLite local. Solo:
1. Aseg√∫rate de que `.env.local` use SQLite
2. Las funciones de Redis (cach√©) no estar√°n disponibles
3. Todo lo dem√°s funcionar√° normal

### ¬øPor qu√© el build tarda tanto?

La primera vez tarda m√°s porque:
- Descarga todas las dependencias
- Genera el cliente de Prisma
- Compila TypeScript

Las siguientes veces ser√° mucho m√°s r√°pido.

---

## üìû SOPORTE

Si sigues teniendo problemas:

1. **Verifica los logs:**
   ```bash
   # Ver logs de npm
   npm config get cache
   npm cache clean --force
   
   # Ver logs de Docker (si lo usas)
   docker-compose logs
   ```

2. **Reinicia todo:**
   ```bash
   # Limpiar node_modules
   rm -rf node_modules .svelte-kit
   npm install
   
   # Reiniciar Docker (si lo usas)
   docker-compose down
   docker-compose up -d
   ```

3. **Usa la versi√≥n simple:**
   - Sin Docker
   - Con npm en lugar de pnpm
   - Con SQLite en lugar de PostgreSQL

---

## ‚úÖ CONFIRMACI√ìN DE √âXITO

Sabr√°s que todo est√° funcionando cuando:

1. `npm run dev` muestre:
   ```
   VITE ready in XXX ms
   ‚ûú Local: http://localhost:5173/
   ```

2. Puedas abrir http://localhost:5173 en tu navegador

3. Veas el globo 3D cargando

¬°Eso es todo! üéâ
