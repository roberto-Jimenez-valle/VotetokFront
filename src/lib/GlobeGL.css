

.vote-card.small .percentage-display,
.vote-card.small-wide .percentage-display {
  margin: 0;
}

/* Evitar que el contenido interno crezca más que la celda */
.vote-cards-section > .vote-cards-grid .vote-card .card-content,
.poll-item > .vote-cards-grid .vote-card .card-content {
  flex: 1 1 auto;
  min-height: 0;
}
:global(html) {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

:global(body) {
  width: 100%;
  min-height: 100vh;
  min-height: calc(var(--vh, 1vh) * 100); /* Fix teclado móvil */
  margin: 0;
  padding: 0;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
  overflow: auto; /* Permitir scroll vertical */
  /* Safe area para notch/home bar */
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Fondos por defecto para SSR y fallback */
:global(html.dark) :global(body) {
  background-color: #0a0a0a;
}

:global(html:not(.dark)) :global(body) {
  background-color: #e8e8e8;
}

:global(html.dark) {
  background-color: #0a0a0a;
}

:global(html:not(.dark)) {
  background-color: #e8e8e8;
}

/* Eliminar media queries obsoletas - ahora usamos .dark class */

/* Fondo dinámico que se actualiza con el color del tema actual */
.dynamic-background {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  z-index: 0; /* Sobre el fondo del body pero debajo del globe-wrap */
  transition: background-color 300ms ease;
  pointer-events: none; /* No bloquear eventos */
}

/* Prevenir scroll en el contenedor principal */
:global(#app),
:global(.min-h-screen) {
  width: 100%;
  min-height: 100vh;
  min-height: calc(var(--vh, 1vh) * 100); /* Fix teclado móvil */
}

.globe-wrap {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 1; /* Sobre el dynamic-background */
  /* Configuraciones específicas para Safari y Edge */
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  backface-visibility: hidden;
  transition: transform 300ms cubic-bezier(0.4, 0.0, 0.2, 1), height 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Comportamiento tipo YouTube: comprimir globo en móvil cuando BottomSheet está expandido */
@media (max-width: 767px) {
  .globe-wrap {
    will-change: height;
  }
  
  .globe-wrap.sheet-expanded {
    height: 25vh; /* Globo más pequeño - 25% del viewport */
    bottom: auto; /* Deshabilitar bottom para usar solo top + height */
  }
  
  /* Transición suave solo en el contenedor */
  .globe-wrap.sheet-expanded,
  .globe-wrap:not(.sheet-expanded) {
    transition: height 250ms ease-out;
    -webkit-transition: height 250ms ease-out;
  }
}

/* Mover globo a la derecha cuando hay modal activa en desktop */
@media (min-width: 768px) {
  body:has(.modal-overlay) .globe-wrap,
  body:has(.bottom-sheet.solid) .globe-wrap {
    transform: translateX(350px) translateZ(0);
    -webkit-transform: translateX(350px) translateZ(0);
  }
}

/* Fondo condicional según tema */
:global(html.dark) .globe-wrap {
  background: #0a0a0a;
}

:global(html:not(.dark)) .globe-wrap {
  background: #e8e8e8;
}

/* Canvas WebGL - asegurar visibilidad en todos los navegadores */
.globe-wrap canvas {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  display: block !important;
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  backface-visibility: hidden;
  /* NO transiciones en canvas WebGL - causa tirones */
}

/* Específico para Edge/Chromium */
@supports (-ms-ime-align: auto) {
  .globe-wrap {
    transform: none;
  }
  .globe-wrap canvas {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Header con logo y avatares */
header {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  z-index: 1005 !important;
  pointer-events: auto;
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  backface-visibility: hidden;
  transition: transform 300ms cubic-bezier(0.4, 0.0, 0.2, 1), opacity 300ms ease;
}

/* Ocultar header y botón de temas en móvil cuando BottomSheet está expandido */
@media (max-width: 767px) {
  body:has(.bottom-sheet.solid) header,
  body:has(.bottom-sheet.solid) .unified-toggle {
    opacity: 0;
    pointer-events: none;
    transform: translateY(-100%);
    -webkit-transform: translateY(-100%);
  }
}

/* Mover header a la derecha cuando hay modal activa o BottomSheet expandido en desktop */
@media (min-width: 768px) {
  /* NO mover el header cuando hay modal o BottomSheet */
  /* Solo queremos mover los avatares para que se centren sobre el globo */
  
  /* Mover y centrar los avatares sobre el globo (350px a la derecha) */
  body:has(.modal-overlay) .avatars-scroll-wrapper,
  body:has(.bottom-sheet.solid) .avatars-scroll-wrapper {
    transform: translateX(350px);
    -webkit-transform: translateX(350px);
    transition: transform 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
  }
  
  /* Centrar los avatares en su contenedor */
  body:has(.modal-overlay) .avatars-scroll-container,
  body:has(.bottom-sheet.solid) .avatars-scroll-container {
    display: flex;
    justify-content: center;
  }
}

/* La apertura del panel se hace desde la barra de leyenda */

/* Panel de ajustes flotante (ahora junto a la leyenda) */
.settings-panel {
  position: fixed;
  top: 52px;
  left: 10px;
  min-width: 320px;
  padding: 10px 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  color: #e5e7eb;
  background: rgba(0, 0, 0, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 10px;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  font-size: 13px;
  line-height: 1.3;
  font-family: system-ui, -apple-system, sans-serif;
  z-index: 1001;
}
.settings-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
  z-index: 1000;
}
.panel-row {
  display: grid;
  grid-template-columns: 1fr 1fr auto auto;
  align-items: center;
  gap: 8px;
}
.panel-row input[type="range"] {
  width: 100%;
}
.val {
  opacity: 0.8;
  min-width: 36px;
  text-align: right;
}

/* Leyenda (modo tendencia) */
.legend-panel {
  position: fixed;
  left: 10px;
  left: calc(10px + env(safe-area-inset-left)); /* Safe area izquierda */
  bottom: 80px;
  bottom: calc(80px + env(safe-area-inset-bottom)); /* Safe area inferior */
  min-width: 120px;
  max-width: 160px;
  padding: 0;
  color: #e5e7eb;
  background: transparent;
  border: none;
  border-radius: 0;
  backdrop-filter: none;
  font-size: 13px;
  line-height: 1.3;
  font-family: system-ui, -apple-system, sans-serif;
  z-index: 1000;
}
.legend-title {
  font-weight: 600;
  opacity: 0.9;
  margin-bottom: 6px;
}
.legend-item {
  display: grid;
  grid-template-columns: 14px 1fr auto;
  gap: 8px;
  align-items: center;
  padding: 2px 0;
}
.legend-color {
  width: 14px;
  height: 14px;
  border-radius: 3px;
  border: 1px solid #00000055;
}
.legend-key {
  opacity: 0.95;
}
.legend-count {
  opacity: 0.8;
}
.legend-gradient {
  height: 10px;
  border-radius: 5px;
  border: 1px solid #00000055;
  margin: 4px 0 2px;
}
.legend-grad-row {
  display: grid;
  grid-template-columns: 12px 1fr 12px;
  align-items: center;
  gap: 6px;
}
.legend-mark {
  opacity: 0.9;
  font-weight: 600;
  text-align: center;
  font-size: 12px;
}
.legend-grad-row {
  cursor: pointer;
}

/* Botón tres puntos para abrir el panel de ajustes */
.legend-menu-btn {
  position: fixed;
  top: 174px;
  right: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.28);
  background: rgba(0, 0, 0, 0.7);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  color: #e5e7eb;
  cursor: pointer;
  z-index: 1003;
}
.legend-menu-btn:hover {
  border-color: rgba(255, 255, 255, 0.42);
}

/* Botón de ajustes (arriba derecha, encima del botón de localización) */
.settings-btn {
  position: fixed;
  top: 176px;
  right: 10px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.28);
  background: rgba(0, 0, 0, 0.85);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  color: #e5e7eb;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  transition: all 0.2s ease;
  cursor: pointer;
  z-index: 1003;
}
.settings-btn:hover {
  border-color: rgba(255, 255, 255, 0.42);
}


/* Botón para ir a mi ubicación (abajo derecha) */
.locate-btn {
  position: fixed;
  top: 222px;
  right: 10px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.28);
  background: rgba(0, 0, 0, 0.85);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  color: #e5e7eb;
  cursor: pointer;
  z-index: 1003;
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  transition: all 0.2s ease;
}
.locate-btn:hover {
  border-color: rgba(255, 255, 255, 0.42);
  background: rgba(0, 0, 0, 0.85);
}

/* Puntos de voto (HTML) */
:global(.vote-dot) {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: #38bdf8;
  box-shadow: 0 0 0 2px rgba(56, 189, 248, 0.35);
  transform: translate(-50%, -50%);
  pointer-events: auto;
}
:global(.vote-cluster) {
  min-width: 22px;
  height: 22px;
  padding: 0 6px;
  border-radius: 999px;
  background: rgba(56, 189, 248, 0.18);
  color: #e5e7eb;
  border: 1px solid rgba(56, 189, 248, 0.55);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font:
    700 12px/1 system-ui,
    sans-serif;
  transform: translate(-50%, -50%);
  pointer-events: auto;
  backdrop-filter: blur(4px);
}

/* Barra de etiquetas trending */
.tagbar {
  position: fixed;
  top: calc(64px + env(safe-area-inset-top));
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 8px;
  max-width: min(100vw, 980px);
  width: calc(100%);
  padding: 0;
  color: #e5e7eb;
  background: transparent; /* sin fondo negro */
  border: none;
  border-radius: 0;
  backdrop-filter: none;
  z-index: 1002;
}
.top-search-btn {
  display: none; /* Ocultar el botón de búsqueda de arriba */
}
.top-search-btn:hover {
  opacity: 0.9;
}
/* Posicionar el dropdown de tabs pegado a la derecha */
.tabs-float {
  position: fixed;
  top: 4px;
  right: 10px; /* pegado al borde derecho */
  z-index: 10000; /* por debajo del BottomSheet expandido */
  display: flex;
  align-items: center;
  gap: 8px;
}
.search-icon {
  position: absolute;
  left: 14px;
  width: 18px;
  height: 18px;
  opacity: 0.7;
  pointer-events: none;
  color: #ffffff;
}
.floating-search {
  position: fixed;
  top: 8px;
  right: 10px; /* pegado al borde derecho, mismo que tabs-float */
  display: flex;
  align-items: center;
  padding: 8px 14px;
  width: 0;
  opacity: 0;
  overflow: hidden;
  pointer-events: none;
  -webkit-transition: width 180ms ease, opacity 180ms ease;
  -moz-transition: width 180ms ease, opacity 180ms ease;
  transition: width 180ms ease, opacity 180ms ease;
  z-index: 10010; /* por debajo del BottomSheet expandido */
  border-radius: 20px; /* mismo que nav-chip */
  height: auto; /* altura automática como nav-chip */
  border: 1px solid rgba(255, 255, 255, 0.2); /* mismo borde que nav-chip.active */
  background: rgba(0, 0, 0, 0.85); /* fondo más sólido para Safari */
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3); /* misma sombra que nav-chip.active */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}
.floating-search.open {
  width: clamp(220px, 33vw, 480px);
  opacity: 1;
  pointer-events: auto;
}
.floating-search:hover {
  border-color: rgba(255, 255, 255, 0.3);
  background: rgba(255, 255, 255, 0.2);
}
.tag-search {
  flex: 1;
  min-width: 160px;
  background: transparent; /* dejar ver el glass del contenedor */
  border: none;
  color: #ffffff;
  padding: 0 0 0 28px;
  border-radius: 0;
  outline: none;
  height: auto;
  font-size: 16px; /* Mínimo 16px para evitar zoom en iOS */
  font-weight: 400;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  /* Quitar estilos nativos de Safari */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}
.tags-row {
  display: flex;
  gap: 8px;
  align-items: center;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 0 10px;
  white-space: nowrap;
  /* Ocultar barras de scroll en todos los navegadores */
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE y Edge legacy */
}
.tags-row::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}
.friends-row {
  display: flex;
  gap: 1px; /* aún menos margen entre tiles */
  align-items: center;
  padding: 0px 0px 0px 0; /* sin margen a la izquierda y menos respiro a la derecha */
  overflow-x: auto;
  scrollbar-width: none;
}
.friends-row::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}
.friend {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  min-width: 82px;
  width: 98px; /* ancho fijo para controlar el truncado del texto */
  border: none;
  background: transparent;
  padding: 0;
  cursor: pointer;
}
.avatar {
  width: 68px;
  height: 68px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  background: rgba(255, 255, 255, 0.08);
  object-fit: cover;
  box-sizing: border-box;
  position: relative;
  display: block;
}
.avatar-circle {
  width: 68px;
  height: 68px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  display: flex;
  align-items: center;
  justify-content: center;
  font:
    700 24px/1 system-ui,
    sans-serif;
  color: #ffffff;
  background: rgba(255, 255, 255, 0.08);
  box-sizing: border-box;
  position: relative;
}
/* Ring profesional visto/no visto */
/* Unseen: aro degradado tipo Instagram */
.avatar.unseen,
.avatar-circle.unseen {
  padding: 2px; /* crea el aro alrededor */
  background: conic-gradient(from 0deg, #22d3ee, #3b82f6, #a3e635, #22d3ee);
  border: none;
}
/* El contenido interior mantiene el fondo/imagen con un círculo completo */
.avatar.unseen {
  background-clip: padding-box;
}
.avatar-circle.unseen {
  background-clip: padding-box;
}

/* Seen: aro neutro sutil */
.avatar.seen,
.avatar-circle.seen {
  padding: 2px;
  background: linear-gradient(
    180deg,
    rgba(148, 163, 184, 0.45),
    rgba(148, 163, 184, 0.25)
  );
  border: none;
}
/* Fondo opaco específico para ubicaciones */
.avatar-loc {
  background: #000000; /* negro, opaco */
  border-color: rgba(255, 255, 255, 0.4);
}
/* Icono circular (diana) para ubicaciones */
.loc-icon {
  width: 30px;
  height: 30px;
  display: inline-block;
}
.friend-name {
  font:
    13px/1 system-ui,
    sans-serif;
  opacity: 0.95;
  color: #cbd5e1; /* gris más oscuro para mayor legibilidad */
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
}
/* Desplazar la esfera ligeramente hacia abajo para dar respiro bajo el degradado */
.globe-wrap :global(canvas) {
  transform: translateY(30px);
  margin-bottom: 0;
}
/* Degradado superior suave para evitar corte recto */
.globe-top-fade {
  position: fixed;
  top: 20;
  left: 0;
  right: 0;
  height: 136px; /* altura del degradado aumentada */
  pointer-events: none;
  z-index: 10; /* por encima del canvas, por debajo de la UI */
  transition: opacity 300ms ease, transform 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Ocultar degradado superior en móvil cuando BottomSheet está expandido */
@media (max-width: 767px) {
  body:has(.bottom-sheet.solid) .globe-top-fade {
    opacity: 0;
    transform: translateY(-100%);
    -webkit-transform: translateY(-100%);
  }
}
/* Bottom sheet estilo Google Maps */
.bottom-sheet {
  position: fixed;
  top: 0; /* Extender hasta arriba */
  left: 0;
  right: 0;
  bottom: 0; /* Extender hasta abajo */
  max-height: 100vh; /* Prevenir que se expanda más allá del viewport */
  height: 100vh; /* Altura completa */
  -webkit-transform: translateY(100vh);
  -moz-transform: translateY(100vh);
  -ms-transform: translateY(100vh);
  transform: translateY(100vh);
  -webkit-transition: -webkit-transform 0ms linear;
  -moz-transition: -moz-transform 0ms linear;
  transition: transform 0ms linear;
  z-index: 20000; /* por encima de la barra inferior y cualquier overlay */
  color: #e5e7eb;
  border-top-left-radius: 0; /* Sin redondeo arriba cuando está expandido */
  border-top-right-radius: 0; /* Sin redondeo arriba cuando está expandido */
  -webkit-backdrop-filter: blur(0px);
  backdrop-filter: blur(0px);
  display: flex;
  flex-direction: column;
  pointer-events: none; /* NO capturar eventos, los hijos decidirán */
  cursor: grab; /* Todo el sheet es arrastrable */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none; /* Evitar selección de texto al arrastrar */
  /* Padding inferior para el menú de navegación */
  padding-bottom: 20px;
}

/* Comportamiento tipo YouTube en móvil: BottomSheet debajo del globo comprimido */
@media (max-width: 767px) {
  .bottom-sheet.solid {
    /* Cuando está expandido (solid), limitar altura para dejar ver el globo */
    top: calc(25vh - 15px) !important; /* Subir 15px el inicio del sheet */
    height: calc(75vh + 15px) !important; /* Compensar aumentando la altura total */
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    transform: translateY(0) !important; /* No necesita translateY adicional */
    -webkit-transform: translateY(0) !important;
  }
  
  /* Asegurar transición suave del BottomSheet en móvil - sincronizada con globo */
  .bottom-sheet.solid.transitioning {
    will-change: top, height, transform;
    transition: top 250ms ease-out, height 250ms ease-out, transform 250ms ease-out, backdrop-filter 300ms ease !important;
    -webkit-transition: top 250ms ease-out, height 250ms ease-out, -webkit-transform 250ms ease-out, -webkit-backdrop-filter 300ms ease !important;
  }
  
  /* La barra de drag área siempre arriba del sheet - transparente para heredar fondo */
  .bottom-sheet.solid .sheet-drag-area {
    position: sticky;
    top: 0;
    z-index: 100;
    background: transparent !important; /* Transparente para heredar del padre */
  }
  
  /* Asegurar que el contenido scrolleable ocupa el espacio disponible */
  .bottom-sheet.solid .main-scroll-container {
    max-height: calc(75vh - 105px); /* +15px disponibles por el aumento de altura */
  }
  
  .bottom-sheet.solid .sheet-content {
    max-height: calc(75vh - 105px);
  }
  
  .bottom-sheet.solid .additional-polls-container {
    max-height: calc(75vh - 165px); /* +15px por el aumento de altura */
  }
}
 
/* Desktop: Alinear a la izquierda y limitar ancho del bottom-sheet */
@media (min-width: 768px) {
  .bottom-sheet {
    left: 0;
    right: auto;
    width: 100%;
    max-width: 700px;
    transform: translateY(100vh);
    -webkit-transform: translateY(100vh);
    -moz-transform: translateY(100vh);
    -ms-transform: translateY(100vh);
    border-top-left-radius: 0;
    border-top-right-radius: 1.25rem; /* Esquina superior derecha redondeada */
  }
  
  .bottom-sheet.transitioning {
    transition: transform 250ms ease-out, backdrop-filter 300ms ease;
    -webkit-transition: -webkit-transform 250ms ease-out, -webkit-backdrop-filter 300ms ease;
    -moz-transition: -moz-transform 250ms ease-out, backdrop-filter 300ms ease;
  }
}

/* Los hijos del bottom-sheet SÍ capturan eventos */
.bottom-sheet > * {
  pointer-events: auto;
}
.bottom-sheet:active {
  cursor: grabbing;
}

/* Transición suave solo cuando NO se está arrastrando */
.bottom-sheet.transitioning {
  -webkit-transition: -webkit-transform 250ms ease-out, -webkit-backdrop-filter 300ms ease;
  -moz-transition: -moz-transform 250ms ease-out, backdrop-filter 300ms ease;
  transition: transform 250ms ease-out, backdrop-filter 300ms ease;
}

/* Elementos interactivos dentro del sheet mantienen su cursor apropiado */
.bottom-sheet button,
.bottom-sheet a,
.bottom-sheet input,
.bottom-sheet textarea,
.bottom-sheet select,
.bottom-sheet .nav-chip {
  cursor: pointer;
  -webkit-user-select: auto;
  -moz-user-select: auto;
  -ms-user-select: auto;
  user-select: auto;
}

/* Las tarjetas de voto necesitan touch-action especial para el scroll horizontal */
.bottom-sheet .vote-card {
  cursor: pointer;
  -webkit-user-select: auto;
  -moz-user-select: auto;
  -ms-user-select: auto;
  user-select: auto;
}

/* El contenedor principal de scroll DEBE permitir scroll vertical */
.bottom-sheet .main-scroll-container {
  cursor: default;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none; /* Evitar selección de texto */
  pointer-events: auto !important; /* Asegurar que recibe eventos */
  /* Asegurar que captura TODOS los eventos, incluso en espacios vacíos */
  background: transparent;
  position: relative;
  z-index: 1;
  /* CRÍTICO: Scroll suave en iOS */
  -webkit-overflow-scrolling: touch !important;
  /* Asegurar scroll en móvil */
  overflow-y: auto !important;
}

/* Los elementos heredan naturalmente del contenedor */
.bottom-sheet .main-scroll-container * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none; /* Evitar selección de texto al arrastrar */
}

/* El contenedor de encuestas adicionales DEBE permitir scroll vertical */
.bottom-sheet .additional-polls-container {
  cursor: default;
  -webkit-user-select: auto;
  -moz-user-select: auto;
  -ms-user-select: auto;
  user-select: auto;
}

/* Scroll manejado por el navegador para poll-items */

.bottom-sheet.solid {
  background: rgba(24, 26, 32, 0.85); /* Semi-transparente con glass effect */
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  backdrop-filter: blur(20px) saturate(180%);
  /* Asegurar que el scroll funciona cuando está expandido */
  overflow: hidden; /* Ocultar overflow del sheet, el scroll está en main-scroll-container */
}
.bottom-sheet.glass {
  background: linear-gradient(
    180deg,
    rgba(0, 0, 0, 0.45) 0%,
    rgba(0, 0, 0, 0.7) 100%
  );
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  /* Asegurar que el scroll funciona cuando está en peek/collapsed */
  overflow: hidden;
}

/* ===== Ajuste específico: small y small-wide dentro de grids (200px exactos) ===== */
.vote-cards-section > .vote-cards-grid .vote-card.small,
.vote-cards-section > .vote-cards-grid .vote-card.small-wide,
.poll-item > .vote-cards-grid .vote-card.small,
.poll-item > .vote-cards-grid .vote-card.small-wide,
.vote-cards-grid.accordion .vote-card.small,
.vote-cards-grid.accordion .vote-card.small-wide {
  height: 100%;
}

.vote-cards-section > .vote-cards-grid .vote-card.small .card-header,
.vote-cards-section > .vote-cards-grid .vote-card.small-wide .card-header,
.poll-item > .vote-cards-grid .vote-card.small .card-header,
.poll-item > .vote-cards-grid .vote-card.small-wide .card-header,
.vote-cards-grid.accordion .vote-card.small .card-header,
.vote-cards-grid.accordion .vote-card.small-wide .card-header {
  flex: 0 0 auto;
}

.vote-cards-section > .vote-cards-grid .vote-card.small .card-content,
.vote-cards-section > .vote-cards-grid .vote-card.small-wide .card-content,
.poll-item > .vote-cards-grid .vote-card.small .card-content,
.poll-item > .vote-cards-grid .vote-card.small-wide .card-content,
.vote-cards-grid.accordion .vote-card.small .card-content,
.vote-cards-grid.accordion .vote-card.small-wide .card-content {
  flex: 1 1 auto;
  min-height: 0;
  overflow: hidden;
  padding: 10px 12px 36px 12px; /* compacto para caber en 200px */
}

/* Cuando está en peek, usar el mismo color que el nav sin transparencia */
.bottom-sheet.peek-state {
  background: #181a20 !important; /* Mismo color que nav-bottom */
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  border-top: none;
}

/* En pantalla completa, ajustar el padding del BottomSheet */
:fullscreen .bottom-sheet,
:-webkit-full-screen .bottom-sheet,
:-moz-full-screen .bottom-sheet {
  padding-bottom: 0 !important; /* Sin padding en fullscreen */
}

/* En pantalla completa, el nav-minimal debe estar visible */
:fullscreen .nav-minimal,
:-webkit-full-screen .nav-minimal,
:-moz-full-screen .nav-minimal {
  z-index: 30070;
  position: relative;
}

/* Cuando el sheet está expandido, asegurar que el scroll funciona */
.bottom-sheet.solid .main-scroll-container,
.bottom-sheet.transitioning .main-scroll-container {
  /* Forzar scroll en iOS */
  -webkit-overflow-scrolling: touch !important;
  overflow-y: auto !important;
  /* Asegurar que tiene altura */
  flex: 1;
  min-height: 0; /* Importante para flex en Safari */
}

/* El drag area siempre debe estar por encima del scroll */
.bottom-sheet .sheet-drag-area {
  position: relative;
  z-index: 100;
  pointer-events: auto !important;
}
.sheet-header {
  padding: 16px 14px 18px; /* área de arrastre más grande */
  cursor: grab;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  position: relative;
}
.sheet-close {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 32px;
  height: 32px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: #e5e7eb;
  border: 1px solid rgba(255, 255, 255, 0.28);
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.18) 0%,
    rgba(255, 255, 255, 0.1) 100%
  );
  backdrop-filter: blur(10px) saturate(120%);
  -webkit-backdrop-filter: blur(10px) saturate(120%);
  cursor: pointer;
  z-index: 5; /* por encima del área de drag del header */
  pointer-events: auto;
}
.sheet-close:hover {
  border-color: rgba(255, 255, 255, 0.42);
}
.sheet-close svg {
  pointer-events: none;
}
.sheet-grabber {
  width: 56px;
  height: 4px;
  border-radius: 999px; /* más grande, más fácil de acertar */
  background: rgba(255, 255, 255, 0.45);
  margin: 0;
  flex-shrink: 0;
}
.sheet-title {
  font:
    600 16px/1.2 system-ui,
    sans-serif;
  text-align: center;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* Header de arrastre simplificado */
.sheet-drag-area {
  padding: 12px 16px 8px;
  cursor: grab;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  display: flex;
  justify-content: center;
  align-items: center;
  /* IMPORTANTE: Asegurar que captura eventos de arrastre */
  pointer-events: auto !important;
  position: relative;
  z-index: 10; /* Por encima del contenido */
  /* Evitar que el scroll interfiera */
  touch-action: none; /* Permitir solo arrastre, no scroll */
}

/* Drag area transparente en móvil para heredar del padre */
@media (max-width: 767px) {
  .bottom-sheet.glass .sheet-drag-area {
    background: transparent !important; /* Transparente para heredar del padre */
  }
}

.sheet-drag-area:active {
  cursor: grabbing;
}

/* Barra de gráfico como elemento principal de arrastre */
.drag-chart {
  width: 100%;
  max-width: 320px;
  height: 12px;
  border-radius: 999px;
  overflow: hidden;
  display: flex;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.4);
  cursor: grab;
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  transition: all 0.2s ease;
  /* Asegurar que captura eventos */
  pointer-events: auto;
  touch-action: none; /* Solo arrastre */
}

.drag-chart:active {
  cursor: grabbing;
}

.drag-chart:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
  border-color: rgba(255, 255, 255, 0.4);
}

.drag-chart .drag-seg {
  height: 100%;
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  transition: all 0.2s ease;
}

/* Sección de tarjetas de votación estilo Google Maps */
.vote-cards-section {
  padding: 1px 0;
}

/* Header de sección con información total y botones */
.vote-section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 16px 12px 16px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.vote-total-info {
  display: flex;
  flex-direction: column;
  gap: 6px;
  color: #ffffff;
}

.vote-total-info > span {
  display: flex;
  align-items: center;
  gap: 8px;
}

.total-votes {
  font-size: 16px;
  font-weight: 600;
}

.total-participants {
  font-size: 14px;
  font-weight: 400;
  opacity: 0.8;
}

.action-buttons {
  display: flex;
  align-items: center;
  gap: 8px;
}

.action-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  color: #ffffff;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
}

.action-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.3);
  -webkit-transform: translateY(-1px);
  -moz-transform: translateY(-1px);
  -ms-transform: translateY(-1px);
  transform: translateY(-1px);
}

.action-btn svg {
  flex-shrink: 0;
}

.visits-info {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #ffffff;
  font-size: 14px;
  font-weight: 400;
  opacity: 0.8;
  margin-top: 2px;
}

.visits-info svg {
  flex-shrink: 0;
  opacity: 0.8;
}

.visits-count {
  font-size: 11px;
  font-weight: 600;
}

/* Contenedor mosaico horizontal con Grid */
.vote-cards-grid {
  display: grid;
  grid-auto-flow: column;        /* Flujo horizontal */
  grid-auto-columns: 160px;      /* Ancho base de columna */
  grid-template-rows: repeat(2, 115px); /* Máximo 2 filas fijas */
  gap: 8px;
  padding: 0 16px 16px 16px;
  height: auto; /* Altura automática según contenido */
  min-height: 240px; /* Altura mínima para 2 filas */
  overflow-x: auto;
  overflow-y: hidden;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  align-content: start; /* Alinear al inicio para evitar superposiciones */
  
  /* Ocultar scrollbar */
  scrollbar-width: none;
  -ms-overflow-style: none;
  
  /* IMPORTANTE: Permitir eventos de scroll */
  pointer-events: auto;
}

/* Ocultar scrollbar en WebKit browsers (Chrome, Safari, Edge) */
.vote-cards-grid::-webkit-scrollbar {
  display: none;
}


/*.vote-cards-grid.dense .vote-card.large  { grid-row: span 2; grid-column: span 2; }
.vote-cards-grid.dense .vote-card.medium { grid-row: span 2; grid-column: span 1; }
.vote-cards-grid.dense .vote-card.small-wide { grid-row: span 1; grid-column: span 2; }
.vote-cards-grid.dense .vote-card.small  { grid-row: span 1; grid-column: span 1; }
*/

/* Compactar cuando solo hay 1 o 2 opciones: ocupar todo el ancho sin scroll */
.vote-cards-grid.compact-two {
  grid-auto-flow: row; /* Flujo vertical para 2 opciones */
  grid-auto-columns: 1fr;
  grid-auto-rows: minmax(200px, auto); /* Más altura para mostrar contenido completo */
  grid-template-columns: 1fr 1fr;
  grid-template-rows: none; /* Sin límite de filas */
  overflow-x: hidden;
  gap: 12px;
  height: auto;
  min-height: 200px;
}

.vote-cards-grid.compact-one {
  grid-auto-columns: 1fr;
  grid-auto-rows: 220px;
  grid-template-columns: 1fr;
  overflow-x: hidden;
  overflow-y: visible;
  gap: 16px;
}

/* Tarjetas individuales de votación - tamaños dinámicos */
.vote-card {
  border-radius: 16px;
  cursor: pointer;
  /* Optimizar animaciones para GPU */
  -webkit-transform: translateZ(0);
  -moz-transform: translateZ(0);
  -ms-transform: translateZ(0);
  -o-transform: translateZ(0);
  transform: translateZ(0);
  will-change: transform, box-shadow;
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  border: none;
  text-align: left;
  padding: 0;
  background: rgba(255,255,255,0.08);
  --fill-window: 120px;
  outline: none;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  position: relative;
  z-index: 1;
}

.vote-card:focus {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

.vote-card:focus-visible {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

.vote-card:active {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
  background: rgba(255,255,255,0.08) !important;
  transform: translateZ(0) !important;
}

.vote-card:hover { 
  /* NO aplicar borde de color en hover */
  /* Solo elevar y aplicar sombra */
  -webkit-transform: translateY(-2px);
  -moz-transform: translateY(-2px);
  -ms-transform: translateY(-2px);
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  /* Forzar aceleración GPU */
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  backface-visibility: hidden;
}

.vote-card.collapsed {
  background: rgba(255,255,255,0.06);
}

/* Estilo para la opción votada - borde plano del color de la opción */
/* SOLO después de votar, NO en hover */
/* Este estilo debe ser PERMANENTE después de votar */
.vote-card.voted {
  border: 3px solid var(--card-color) !important;
  background: rgba(255,255,255,0.12) !important;
  position: relative;
  /* Asegurar que el borde siempre sea visible */
  box-shadow: 0 0 0 1px var(--card-color) !important;
}

.vote-card.voted:hover {
  /* Mantener el borde de color cuando haces hover sobre una tarjeta votada */
  transform: translateY(-4px);
  border: 3px solid var(--card-color) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3), 0 0 0 1px var(--card-color) !important;
}

/* El borde debe mantenerse incluso cuando la tarjeta está colapsada */
.vote-card.voted.collapsed {
  border: 3px solid var(--card-color) !important;
  box-shadow: 0 0 0 1px var(--card-color) !important;
}

/* El borde debe mantenerse incluso cuando la tarjeta está activa */
.vote-card.voted.is-active {
  border: 3px solid var(--card-color) !important;
  box-shadow: 0 0 0 1px var(--card-color) !important;
}

/* Header con avatar y título */
.card-header {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  position: relative;
  gap: 12px;
}
.creator-avatar {
  width: 32px; 
  height: 32px; 
  border-radius: 50%; 
  object-fit: cover;
  border: 2px solid rgba(255,255,255,0.4);
  flex-shrink: 0;
  order: -1;
  margin-right: 8px;
}

.vote-card.is-active .card-header {
  flex-direction: column;
  align-items: flex-start;
  gap: 8px;
}

.vote-card.is-active .creator-avatar {
  margin: 0 0 4px 0;
}
.card-header .question-title {
  font-size: 14px;
  font-weight: 500;
  color: white;
  margin: 0;
  line-height: 1.3;
  text-align: left;
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  -webkit-box-orient: vertical;
  word-break: break-word;
  min-height: 72px;
}

.vote-card.is-active .card-header .question-title {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 4;
  line-clamp: 4;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Contenido adaptativo */
.card-content {
  flex: 1;
  padding: 0 16px 50px 16px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 0;
  position: relative;
}

/* Tarjetas sin header - gráfico llega hasta arriba */
.card-content-full {
  padding: 16px 16px 60px 16px;
  justify-content: flex-end;
  align-items: stretch;
  gap: 16px;
}
.card-content-full .vote-chart-container {
  width: 100%;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: stretch;
  gap: 12px;
  margin: 0;
  padding: 0;
}
.card-content-full .vote-chart {
  flex: 1;
  margin: 0;
  padding: 0;
}
.card-content-full .time-range-bottom {
  margin-top: 12px;
}
.card-content-full .chart-tooltip {
  top: 12px;
  left: 12px;
}

.card-content::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: min(100%, var(--fill-window, 120px));
  background: linear-gradient(0deg,
      var(--card-color, rgba(0, 0, 0, 0.4)) calc(var(--fill-window, 120px) * (clamp(var(--fill-pct-val, 0), 0, 100) / 100)),
      transparent calc(var(--fill-window, 120px) * (clamp(var(--fill-pct-val, 0), 0, 100) / 100))
    );
  pointer-events: none;
  z-index: 0;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.vote-card.collapsed .card-content::before {
  opacity: 1;
}

/* NO mostrar gradiente de color solo por estar activa/desplegada */
/* .vote-card.is-active .card-content::before {
  opacity: 1;
} */

/* Mostrar gradiente de color SOLO después de votar */
/* El gradiente debe ser PERMANENTE después de votar */
.vote-card.voted .card-content::before {
  opacity: 1 !important;
}

/* Mantener el gradiente incluso cuando la tarjeta votada está colapsada */
.vote-card.voted.collapsed .card-content::before {
  opacity: 1 !important;
}

/* Mantener el gradiente incluso cuando la tarjeta votada está activa */
.vote-card.voted.is-active .card-content::before {
  opacity: 1 !important;
}

/* Ocultar el relleno de color en tarjetas con gráfico (una sola opción) */
.vote-cards-grid.compact-one .card-content::before {
  display: none;
}

/* Desactivar interacción en tarjetas de una sola opción */
.vote-cards-grid.compact-one .vote-card {
  cursor: default;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.vote-cards-grid.compact-one .vote-card:hover {
  transform: none;
  box-shadow: none;
}

.vote-cards-grid.compact-one .vote-card:focus {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
  background: rgba(255,255,255,0.08) !important;
}

.vote-cards-grid.compact-one .vote-card:active {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
  background: rgba(255,255,255,0.08) !important;
  transform: none !important;
}

.percentage-display {
  margin: 0;
  text-align: left;
  width: 100%;
  align-self: flex-start;
  flex: 1;
  display: flex;
  align-items: center;
}

.percentage-large {
  font-size: var(--percentage-font-size, 52px);
  font-weight: 900;
  color: white;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  letter-spacing: -0.02em;
  margin-top: 10px;
  position: relative;
}

.percentage-large::after {
  content: '%';
  font-size: 0.6em; /* 60% del tamaño del número */
  position: absolute;
  bottom: 0.2em;
  margin-left: 0.08em;
  vertical-align: baseline;
}

.vote-info {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  margin-top: auto;
  position: absolute;
  bottom: 12px;
  left: 16px;
}

.vote-count {
  font-size: 14px;
  font-weight: 400;
  color: rgba(255,255,255,0.9);
}

/* Avatares flotantes en esquina inferior derecha */
.friend-avatars-absolute {
  position: absolute;
  bottom: 20px;
  right: 10px;
  display: flex;
  align-items: center;
  flex-direction: row;
  gap: 0;
}

.friend-avatar-floating {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid rgba(255, 255, 255, 0.9);
  margin-left: -8px;
  -webkit-transition: -webkit-transform 0.2s ease;
  -moz-transition: -moz-transform 0.2s ease;
  transition: transform 0.2s ease;
}
.friend-avatar-floating:first-child { margin-left: 0; }
.friend-avatar-floating:hover {
  -webkit-transform: scale(1.1) translateY(-2px);
  -moz-transform: scale(1.1) translateY(-2px);
  -ms-transform: scale(1.1) translateY(-2px);
  transform: scale(1.1) translateY(-2px);
  z-index: 20 !important;
}

/* Badge de "más amigos" */
.more-friends-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(8px);
  color: white;
  font-size: 10px;
  font-weight: 700;
  border: 2px solid rgba(255, 255, 255, 0.9);
  margin-left: -8px;
  z-index: 5;
}

@supports (container-type: inline-size) {
  .percentage-large {
    --percentage-font-size: clamp(34px, calc(18cqw + 12px), 56px);
  }

  @container (max-width: 320px) {
    .vote-card:not(.is-active) .friend-avatars-absolute {
      flex-direction: column;
      align-items: flex-end;
      gap: 6px;
      right: 8px;
      bottom: 4px;
    }

    .vote-card:not(.is-active) .friend-avatar-floating {
      margin-left: 0;
    }

    .vote-card:not(.is-active) .friend-avatar-floating + .friend-avatar-floating {
      margin-top: -10px;
    }

    .vote-card:not(.is-active) .card-header {
      align-items: flex-start;
      flex-direction: column;
      gap: 6px;
      padding: 12px 9px 4px 4px;
      width: 100%;
    }

    .vote-card:not(.is-active) .card-header .question-title {
      min-height: 0;
      width: 100%;
      display: none;
    }

    .vote-card:not(.is-active) .creator-avatar {
      order: -1;
      align-self: flex-start;
      margin: 0 0 2px 0;
    }

    .vote-card:not(.is-active) .percentage-display {
      align-items: center;
      justify-content: flex-start;
      gap: 4px;
      margin-top: 0;
      transform: translateY(-6px);
      margin-left: 0;
      width: auto;
      align-self: flex-start;
    }

    .vote-card:not(.is-active) .percentage-large {
      --percentage-font-size: min(21px, clamp(24px, calc(22cqw + 4px), 32px));
    }
  }

  @container (max-width: 110px) {
    .vote-card:not(.is-active) .card-content {
      padding: 0 8px 36px 4px;
      align-items: flex-start;
    }

    .vote-card:not(.is-active) .percentage-display {
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 4px;
      transform: translateY(-10px);
    }

    .vote-card:not(.is-active) .percentage-large {
      --percentage-font-size: min(20px, 21px);
    }

    .vote-card:not(.is-active) .creator-avatar {
      width: 28px;
      height: 28px;
      min-width: 28px;
      margin-bottom: 2px;
    }
  }

  @container (max-width: 160px) {
    .vote-card:not(.is-active) .percentage-display {
      gap: 2px;
      transform: translateY(-12px);
      bottom: auto;
    }

    .vote-card:not(.is-active) .percentage-large {
      --percentage-font-size: min(18px, 21px);
    }

    .vote-card:not(.is-active) .card-header {
      flex-wrap: wrap;
      justify-content: flex-start;
    }
  }

  @container (max-width: 150px) {
    .vote-card:not(.is-active) .percentage-display {
      gap: 0;
      transform: translateY(-14px);
      bottom: auto;
    }

    .vote-card:not(.is-active) .percentage-large {
      --percentage-font-size: min(17px, 21px);
    }
  }
}

/* Estilos responsivos por tamaño de tarjeta */
.vote-card.large .card-header {
  padding: 12px 16px;
}
.vote-card.large .creator-avatar {
  width: 32px;
  height: 32px;
}
.vote-card.large .card-header .question-title {
  font-size: 18px;
  min-height: 70px;
}
.vote-card.large .card-content {
  padding: 0 16px 50px 16px;
}
/* Tarjetas grandes - porcentaje muy prominente */
.vote-card.large .percentage-large {
  font-size: 80px;
  font-weight: 900;
  letter-spacing: -0.03em;
}

.extreme{
  font-size: 75px;
}

.vote-card.large .percentage-large::after {
  content: '%';
  font-size: 0.6em;
  position: absolute;
  bottom: 0.25em;
  margin-left: 0.1em;
  vertical-align: baseline;
}
.vote-card.large .vote-count {
  font-size: 18px;
}
.vote-card.large .vote-info {
  bottom: 12px;
  left: 16px;
}
.vote-card.large .percentage-display {
  margin: 0;
}

/* Tarjetas medianas - porcentaje mediano */
.vote-card.medium .creator-avatar {
  width: 32px;
  height: 32px;
}
.vote-card.medium .card-header .question-title {
  font-size: 16px;
  min-height: 62px;
}
.vote-card.medium .percentage-large {
  font-size: 48px;
  font-weight: 900;
  letter-spacing: -0.02em;
}
.vote-card.medium .vote-count {
  font-size: 16px;
}
.vote-card.medium .vote-info {
  bottom: 12px;
  left: 16px;
}
.vote-card.medium .percentage-display {
  margin: 0;
}

/* Tarjetas pequeñas - porcentaje muy compacto */
.vote-card.small .percentage-large {
  font-size: 30px;
  font-weight: 900;
  letter-spacing: -0.005em;
  line-height: 0.8;
}

.vote-card.small .percentage-large::after {
  content: '%';
  font-size: 0.6em;
  position: absolute;
  bottom: 0.15em;
  margin-left: 0.05em;
  vertical-align: baseline;
}
.vote-card.small .percentage-display {
  font-size: 12px;
  min-height: 43px;
}
.vote-card.small .vote-count {
  font-size: 9px;
}

.vote-card.small .vote-info {
  bottom: 12px;
  left: 16px;
}

.header-meta { display: inline-flex; gap: 6px; }

/* ---- Cross-browser hardening for vote cards ---- */
:root {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Ensure consistent box-sizing inside the sheet */
.bottom-sheet *,
.vote-cards-grid *,
.vote-card * {
  box-sizing: border-box;
}

/* Grid density and consistent gaps across engines */
.vote-cards-grid {
  grid-auto-flow: dense;
  gap: 6px; /* use px for consistent rendering */
}

/* Horizontal layout ONLY for the first/top grid inside vote-cards-section */
.vote-cards-section > .vote-cards-grid {
  display: grid;
  grid-auto-flow: column dense; /* llena columnas de izquierda a derecha */
  grid-template-rows: repeat(2, auto); /* dos filas: permite apilar dos pequeñas */
  grid-auto-rows: 200px; /* altura fija por fila: TODAS las cards = 200px */
  grid-auto-columns: 140px; /* ancho base de columna */
  overflow-x: auto;
  overflow-y: hidden; /* nunca scroll vertical */
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox: ocultar scrollbar */
  -ms-overflow-style: none; /* IE/Edge legacy: ocultar scrollbar */
  gap: 12px;
  padding-bottom: 6px; /* espacio para scrollbar */
  scroll-snap-type: x mandatory;
  align-content: start;
}

/* WebKit: ocultar scrollbar manteniendo scroll */
.vote-cards-section > .vote-cards-grid::-webkit-scrollbar { display: none; height: 0; }

.vote-cards-section > .vote-cards-grid .vote-card {
  scroll-snap-align: start;
  height: 100%;
  display: flex;
  flex-direction: column;
  width: 100%; /* llenar columna asignada */
}

/* Spans por tamaño (controlan ancho por columnas y alto por filas) */
.vote-cards-section > .vote-cards-grid .vote-card.small { grid-column: span 1; grid-row: span 1; }
.vote-cards-section > .vote-cards-grid .vote-card.small-wide { grid-column: span 2; grid-row: span 1; }
.vote-cards-section > .vote-cards-grid .vote-card.medium { grid-column: span 2; grid-row: span 2; }
.vote-cards-section > .vote-cards-grid .vote-card.large { grid-column: span 3; grid-row: span 2; }

/* Evitar desbordes internos excepto en compact-one */
.vote-cards-section > .vote-cards-grid .vote-card .card-content { overflow: hidden; }
.vote-cards-section > .vote-cards-grid.compact-one .vote-card .card-content { overflow: visible; }

/* Horizontal layout for additional polls as well */
.poll-item > .vote-cards-grid {
  display: grid;
  grid-auto-flow: column dense;
  grid-template-rows: repeat(2, auto);
  grid-auto-rows: 200px; /* altura fija por fila: TODAS las cards = 200px */
  grid-auto-columns: 140px; /* ancho base de columna */
  overflow-x: auto;
  overflow-y: hidden; /* nunca scroll vertical */
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none;
  gap: 12px;
  padding-bottom: 6px;
  scroll-snap-type: x mandatory;
  align-content: start;
}

/* === DOS CARDS: lado a lado, mitad y mitad, alto máximo 200px === */
.vote-cards-section > .vote-cards-grid.compact-two,
.poll-item > .vote-cards-grid.compact-two {
  grid-template-rows: repeat(2, auto);
  grid-auto-rows: 200px;
  grid-auto-columns: 200px;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-bottom: 6px;
}

.vote-cards-section > .vote-cards-grid.compact-two::-webkit-scrollbar,
.poll-item > .vote-cards-grid.compact-two::-webkit-scrollbar { display: none; height: 0; }

.vote-cards-section > .vote-cards-grid.compact-two .vote-card,
.poll-item > .vote-cards-grid.compact-two .vote-card {
  grid-column: span 1 !important;
  grid-row: span 2 !important;
  height: 200px;
}

/* ===================== ACCORDION HORIZONTAL ===================== */
/* Activar solo cuando haya clase 'accordion' y NO sea compact-two */
.vote-cards-grid.accordion:not(.compact-two) {
  display: flex !important;
  flex-wrap: nowrap;
  align-items: stretch;
  gap: 0; /* pegadas por defecto */
  overflow-x: auto;
  overflow-y: hidden;
  min-height: 120px;        /* altura mínima */
  max-height: 224px;        /* altura máxima */
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
}
.vote-cards-grid.accordion:not(.compact-two)::-webkit-scrollbar { display: none; height: 0; }

/* Por defecto: todas anchas y del mismo alto */
.vote-cards-grid.accordion:not(.compact-two) .vote-card {
  flex: 0 0 300px; /* base mayor para que no se vean pequeñas */
  min-width: 300px;
  min-height: 120px;        /* altura mínima para cards */
  max-height: 224px;        /* altura máxima para cards */
  border-radius: 0;           /* sin esquinas redondeadas intermedias */
  overflow: hidden;           /* recorta bordes al unificar altura */
  display: flex;
  flex-direction: column;
  justify-content: center;  /* centrar contenido verticalmente */
}

/* Transición suave de anchura */
.vote-cards-grid.accordion:not(.compact-two) .vote-card {
  transition: flex-basis 180ms ease, width 180ms ease;
}

/* Al pasar el ratón por el contenedor, contraer ligeramente manteniendo legibilidad */
.vote-cards-grid.accordion:not(.compact-two):hover .vote-card { flex-basis: 280px; }

/* Destacar la card activa (hover, focus-visible o active táctil) */
.vote-cards-grid.accordion:not(.compact-two) .vote-card:hover,
.vote-cards-grid.accordion:not(.compact-two) .vote-card:focus-visible,
.vote-cards-grid.accordion:not(.compact-two) .vote-card:active { flex-basis: 600px; }

/* Asegurar que el contenido se adapta durante la expansión */
.vote-cards-grid.accordion:not(.compact-two) .vote-card .card-content { 
  overflow: hidden;
  padding: 0 16px 20px 16px; /* Reducir padding inferior para mejor centrado */
  justify-content: center;
  align-items: center;
}

/* Header más compacto en acordeones para mejor uso del espacio */
.vote-cards-grid.accordion:not(.compact-two) .vote-card .card-header { 
  padding: 8px 12px;
  min-height: auto;
}
.vote-cards-grid.accordion:not(.compact-two) .vote-card .card-header .question-title {
  min-height: auto;
  text-align: center !important;
  flex: 1;
  width: 100%;
}

/* Ocultar texto en tarjetas colapsadas (no activas) por defecto */
.vote-cards-grid.accordion:not(.compact-two) .vote-card:not(.is-active) .card-header .question-title {
  display: none;
}

/* Mostrar texto solo si hay suficiente ancho (>20px) sin truncar */
@container (min-width: 110px) {
  .vote-cards-grid.accordion:not(.compact-two) .vote-card:not(.is-active) .card-header .question-title {
    display: -webkit-box !important;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

/* ===================== ACCORDION FULL-WIDTH ===================== */
/* Una sola opción: sin acordeón, sin efectos */
.vote-cards-grid.accordion.fullwidth.compact-one {
  overflow-x: hidden;
  width: 100%;
  gap: 0;
  height: 160px;
  min-height: 160px;
  max-height: 160px;
}
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card {
  flex: 1 1 0 !important;
  min-width: 0 !important;
  height: 160px !important;
  min-height: 160px !important;
  max-height: 160px !important;
  cursor: pointer;
  transition: none;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card .card-content {
  padding: 0 16px 20px 16px;
  justify-content: center;
  align-items: center;
}
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card .card-header {
  padding: 8px 12px;
  min-height: auto;
}
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card .card-header .question-title {
  min-height: auto;
  text-align: center !important;
  flex: 1;
  width: 100%;
}
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card:not(.is-active) .card-header .question-title {
  display: none;
}
@container (min-width: 110px) {
  .vote-cards-grid.accordion.fullwidth.compact-one .vote-card:not(.is-active) .card-header .question-title {
    display: -webkit-box !important;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card:hover,
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card:focus-visible,
.vote-cards-grid.accordion.fullwidth.compact-one .vote-card.is-active {
  /* Sin efectos de expansión para 1 opción */
  flex: 1 1 0 !important;
}

/* Pocas opciones (2-5): sin scroll, ocupan todo el ancho */
.vote-cards-grid.accordion.fullwidth:not(.dense):not(.compact-one) {
  overflow-x: hidden;    /* sin scroll horizontal */
  width: 100%;
  gap: 3px;              /* pequeño espacio entre cards */
  height: 160px;
  min-height: 160px;
  max-height: 160px;
}
.vote-cards-grid.accordion.fullwidth:not(.dense) .vote-card {
  /* Estado inicial: todas las cards con tamaño igual para mejor visibilidad */
  flex: 1 1 0 !important;
  min-width: 0 !important;
  height: 160px !important;
  min-height: 160px !important;
  max-height: 160px !important;
  transition: flex-grow 180ms ease, flex-shrink 180ms ease, opacity 250ms ease-out, transform 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
  flex-basis: 0 !important;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* Animaciones deshabilitadas - las transiciones Svelte fly manejan esto ahora */
/*.vote-cards-grid.accordion.fullwidth:not(.dense).pagination-forward .vote-card {
  animation: slideInFromRight 400ms cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}

.vote-cards-grid.accordion.fullwidth:not(.dense).pagination-backward .vote-card {
  animation: slideInFromLeft 400ms cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}*/
.vote-cards-grid.accordion.fullwidth:not(.dense) .vote-card .card-content {
  padding: 0 16px 20px 16px;
  justify-content: center;
  align-items: center;
}
.vote-cards-grid.accordion.fullwidth:not(.dense) .vote-card .card-header {
  padding: 8px 12px;
  min-height: auto;
}
.vote-cards-grid.accordion.fullwidth:not(.dense) .vote-card .card-header .question-title {
  min-height: auto;
  text-align: center !important;
  flex: 1;
  width: 100%;
}
.vote-cards-grid.accordion.fullwidth:not(.dense) .vote-card:not(.is-active) .card-header .question-title {
  display: none;
}
@container (min-width: 110px) {
  .vote-cards-grid.accordion.fullwidth:not(.dense) .vote-card:not(.is-active) .card-header .question-title {
    display: -webkit-box !important;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
.vote-cards-grid.accordion.fullwidth:not(.dense):hover .vote-card { 
  flex: 1 1 0 !important; 
}
.vote-cards-grid.accordion.fullwidth:not(.dense) .vote-card.is-active {
  /* La activa crece al doble */
  flex: 2 1 0 !important;
  flex-basis: 0 !important;
}

/* Estado abierto: la activa ocupa ~70% y el resto comparte ~30% */
.vote-cards-grid.accordion.fullwidth:not(.dense).open .vote-card {
  /* Cada no-activa: grow=1 */
  flex: 1 1 0 !important;
  flex-basis: 0 !important;
  transition: flex-grow 180ms ease, flex-shrink 180ms ease;
}
.vote-cards-grid.accordion.fullwidth:not(.dense).open .vote-card.is-active {
  /* Activa: crece según número de items, mínimo 1 */
  flex: calc(max(1, (var(--items) - 1) * 2.5)) 1 0 !important;
  flex-basis: 0 !important;
}

/* Animaciones para paginación hacia ADELANTE (forward) */
@keyframes slideInFromRight {
  0% {
    opacity: 0;
    transform: translateX(120%);
  }
  60% {
    opacity: 1;
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOutToLeft {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  40% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
    transform: translateX(-120%);
  }
}

/* Animaciones para paginación hacia ATRÁS (backward) */
@keyframes slideInFromLeft {
  0% {
    opacity: 0;
    transform: translateX(-120%);
  }
  60% {
    opacity: 1;
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideOutToRight {
  0% {
    opacity: 1;
    transform: translateX(0);
  }
  40% {
    opacity: 0.5;
  }
  100% {
    opacity: 0;
    transform: translateX(120%);
  }
}

/* Muchas opciones (>5): con scroll horizontal tipo carrusel */
.vote-cards-grid.accordion.fullwidth.dense {
  display: grid !important;
  grid-auto-flow: column;
  grid-template-rows: repeat(2, 1fr);
  grid-auto-columns: minmax(100px, 1fr);
  overflow-x: auto;
  overflow-y: hidden;
  width: 100%;
  gap: 6px;
  scroll-snap-type: x proximity;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding: 0 10px;
  min-height: 120px;
  max-height: 224px;
}
.vote-cards-grid.accordion.fullwidth.dense::-webkit-scrollbar {
  display: none;
  height: 0;
}
.vote-cards-grid.accordion.fullwidth.dense .vote-card {
  scroll-snap-align: start;
  grid-row: span 1;
  min-width: 180px;
  max-width: 200px;
  height: 160px !important;
  min-height: 160px !important;
  max-height: 160px !important;
  border-radius: 16px !important;
  overflow: hidden;
  transition: transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 250ms ease-out;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

/* Animaciones deshabilitadas - las transiciones Svelte fly manejan esto ahora */
/*.vote-cards-grid.accordion.fullwidth.dense.pagination-forward .vote-card {
  animation: slideInFromRight 400ms cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}

.vote-cards-grid.accordion.fullwidth.dense.pagination-backward .vote-card {
  animation: slideInFromLeft 400ms cubic-bezier(0.34, 1.56, 0.64, 1) !important;
}*/
.vote-cards-grid.accordion.fullwidth.dense .vote-card .card-content {
  padding: 0 16px 20px 16px;
  justify-content: center;
  align-items: center;
}
.vote-cards-grid.accordion.fullwidth.dense .vote-card .card-header {
  padding: 8px 12px;
  min-height: auto;
}
.vote-cards-grid.accordion.fullwidth.dense .vote-card .card-header .question-title {
  min-height: auto;
  text-align: center !important;
  flex: 1;
  width: 100%;
}
.vote-cards-grid.accordion.fullwidth.dense .vote-card:not(.is-active) .card-header .question-title {
  display: none;
}
@container (min-width: 110px) {
  .vote-cards-grid.accordion.fullwidth.dense .vote-card:not(.is-active) .card-header .question-title {
    display: -webkit-box !important;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
.vote-cards-grid.accordion.fullwidth.dense .vote-card.is-active {
  z-index: 10;
  border-radius: 16px !important;
}

/* Estado abierto: la activa ocupa 2x2 (2 columnas x 2 filas) */
/* Las 4 cards (2x2) deben caber en el ancho de la ventana */
.vote-cards-grid.accordion.fullwidth.dense.open {
  grid-auto-columns: calc((100vw - 24px - 12px) / 2); /* 2 columnas que caben en pantalla */
  overflow-x: auto; /* Scroll horizontal habilitado para navegar entre cards expandidas */
  scroll-snap-type: x mandatory;
}
.vote-cards-grid.accordion.fullwidth.dense.open .vote-card {
  transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
  grid-row: span 1;
  min-width: auto;
  max-width: none;
  border-radius: 16px !important;
  scroll-snap-align: start;
}
.vote-cards-grid.accordion.fullwidth.dense.open .vote-card.is-active {
  z-index: 20;
  /* Ocupa 2 columnas x 2 filas = 4 cards que caben exactamente en pantalla */
  grid-column: span 2;
  grid-row: span 2;
  min-width: auto;
  max-width: none;
  border-radius: 18px !important;
  scroll-snap-align: center;
}

/* Forzar que cualquier card dentro de un grid ocupe 200px exactos de alto */
.vote-cards-section > .vote-cards-grid .vote-card,
.poll-item > .vote-cards-grid .vote-card {
  height: 100%;            /* llena la celda de 200px */
  display: flex;
  flex-direction: column;
}

.vote-cards-section > .vote-cards-grid .vote-card .card-content,
.poll-item > .vote-cards-grid .vote-card .card-content {
  flex: 1 1 auto;
  min-height: 0;           /* evita que el contenido fuerce más altura */
  overflow: hidden;        /* evita salientes */
}

.vote-cards-section > .vote-cards-grid.compact-one .vote-card .card-content,
.poll-item > .vote-cards-grid.compact-one .vote-card .card-content {
  overflow: visible;       /* permite tooltip fuera */
}

/* A partir de ahora las tarjetas no usan small/medium/large/small-wide; 
   anulamos cualquier estilo heredado por si quedan referencias en el CSS. */
.vote-card.small,
.vote-card.small-wide,
.vote-card.medium,
.vote-card.large {
  grid-column: auto !important;
  grid-row: auto !important;
  width: auto !important;
  min-width: 0 !important;
  border-radius: inherit !important;
}

.vote-card.small .percentage-large,
.vote-card.small-wide .percentage-large,
.vote-card.medium .percentage-large,
.vote-card.large .percentage-large {
  font-size: inherit !important;
  letter-spacing: inherit !important;
}

.vote-card.small .percentage-display,
.vote-card.small-wide .percentage-display,
.vote-card.medium .percentage-display,
.vote-card.large .percentage-display {
  margin: inherit !important;
}

/* Solo extremos con bordes redondeados en acordeón */
.vote-cards-grid.accordion:not(.compact-two) .vote-card:first-child {
  border-top-left-radius: 16px;
  border-bottom-left-radius: 16px;
}
.vote-cards-grid.accordion:not(.compact-two) .vote-card:last-child {
  border-top-right-radius: 16px;
  border-bottom-right-radius: 16px;
}

/* === Compact-two (2 cards): mismas reglas de altura y bordes === */
.vote-cards-section > .vote-cards-grid.compact-two,
.poll-item > .vote-cards-grid.compact-two {
  gap: 0;                 /* pegadas */
  height: 200px;
  max-height: 200px;
}
.vote-cards-section > .vote-cards-grid.compact-two .vote-card,
.poll-item > .vote-cards-grid.compact-two .vote-card {
  height: 100%;
  border-radius: 0;
  overflow: hidden;
}
.vote-cards-section > .vote-cards-grid.compact-two .vote-card:first-child,
.poll-item > .vote-cards-grid.compact-two .vote-card:first-child {
  border-top-left-radius: 16px;
  border-bottom-left-radius: 16px;
}
.vote-cards-section > .vote-cards-grid.compact-two .vote-card:last-child,
.poll-item > .vote-cards-grid.compact-two .vote-card:last-child {
  border-top-right-radius: 16px;
  border-bottom-right-radius: 16px;
}

.poll-item > .vote-cards-grid::-webkit-scrollbar { display: none; height: 0; }

.poll-item > .vote-cards-grid .vote-card { scroll-snap-align: start; width: 100%; height: 100%; display: flex; flex-direction: column; }

.poll-item > .vote-cards-grid .vote-card {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* Button normalization for iOS/Android browsers */
.vote-card {
  -webkit-appearance: none;
  appearance: none;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  backface-visibility: hidden;
  transform: translateZ(0); /* stabilize GPU compositing */
  container-type: inline-size;
  container-name: vote-card;
  position: relative; /* for custom highlight */
  transition: none; /* sin animaciones */
}

/* Percentage baseline alignment and overflow safety */
.percentage-display {
  display: flex;
  align-items: baseline;
  min-height: 1em;
}

/* Unificar alineación del porcentaje en todas las variantes de card */
.vote-card.small .percentage-display,
.vote-card.small-wide .percentage-display,
.vote-card.medium .percentage-display,
.vote-card.large .percentage-display {
  display: flex;
  align-items: baseline;
  justify-content: flex-start;
  margin: 6px 0 0 0; /* separación uniforme bajo el header */
}

.vote-card .percentage-large {
  line-height: 1;
  position: relative;
}

.percentage-large {
  line-height: 1;
  white-space: nowrap; /* avoid wraps across browsers */
}

/* Avatar image sizing to avoid layout shifts */
.creator-avatar {
  width: 28px;
  height: 28px;
  flex: 0 0 28px;
  border-radius: 50%;
  object-fit: cover;
  image-rendering: auto;
}

/* Friend avatars absolute block stacking behavior */
.friend-avatars-absolute img {
  width: 24px;
  height: 24px;
  object-fit: cover;
}

/* Avoid subpixel artifacts on grid items */
.vote-card.small,
.vote-card.small-wide,
.vote-card.medium,
.vote-card.large {
  will-change: contents;
}

/* Información de resumen debajo de las tarjetas */
.vote-summary-info {
  padding: 12px 8px 18px 8px;
  background: transparent;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 4px;
  flex-wrap: nowrap;
  overflow-x: auto;
  overflow-y: visible;
  scrollbar-width: none;
  -ms-overflow-style: none;
  position: relative;
}

.vote-summary-info::-webkit-scrollbar {
  display: none;
}

.vote-stats {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  position: relative;
  z-index: 1000;
}

.vote-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

.vote-actions .action-share {
  margin-left: auto;
}

/* Botón de globo con efecto especial */
.action-globe {
  position: relative;
  transition: all 0.3s ease;
}

.action-globe:hover {
  color: #60a5fa !important;
  transform: scale(1.1);
}

.action-globe svg {
  transition: all 0.3s ease;
}

.action-globe:hover svg {
  stroke: #60a5fa;
  filter: drop-shadow(0 0 8px rgba(96, 165, 250, 0.6));
  animation: globe-spin 2s linear infinite;
}

@keyframes globe-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

.stat-badge {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 0;
  background: transparent;
  border-radius: 0;
  border: none;
  font-size: 13px;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.6);
  letter-spacing: 0;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.stat-badge:hover {
  color: rgba(255, 255, 255, 0.9);
}

.stat-badge svg {
  opacity: 1;
  flex-shrink: 0;
  width: 22px;
  height: 22px;
  stroke: white;
}

.stat-badge:hover svg {
  opacity: 1;
}

.stat-label {
  opacity: 0.5;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 600;
}

.stat-value {
  font-weight: 600;
  color: rgba(255, 255, 255, 0.85);
}

.action-badge {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: 0;
  font-size: 13px;
  font-weight: 400;
  color: white;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
  white-space: nowrap;
}

.action-badge:hover {
  color: rgba(255, 255, 255, 0.8);
}

.action-badge:active {
  transform: scale(0.95);
}

.action-badge svg {
  opacity: 1;
  flex-shrink: 0;
  width: 22px;
  height: 22px;
  stroke: white;
}

.action-badge:hover svg {
  opacity: 0.8;
}

/* FIX CHROME MÓVIL: Ajustes para dispositivos táctiles */
@media (hover: none) and (pointer: coarse) {
  /* Mantener backdrop-filter solo para el bottom-sheet */
  *:not(.bottom-sheet) {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  
  /* Fondos sólidos de reemplazo para elementos que tenían blur */
  .top-search-btn,
  .nav-chip,
  .action-btn,
  :global(.vote-cluster) {
    background: rgba(0, 0, 0, 0.9) !important;
  }
  
  /* Mantener efecto glass en el bottom-sheet para móviles */
  .bottom-sheet.glass {
    background: linear-gradient(
      180deg,
      rgba(0, 0, 0, 0.45) 0%,
      rgba(0, 0, 0, 0.7) 100%
    ) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    backdrop-filter: blur(10px) !important;
  }
}

/* Estilos para el botón de voto */
.action-badge.action-vote,
.stat-badge.action-vote {
  position: relative;
  transition: all 0.2s ease;
}

.action-badge.action-vote:hover,
.stat-badge.action-vote:hover {
  opacity: 0.8;
}

/* Estado: no ha votado */
.action-badge.action-vote.no-vote svg,
.stat-badge.action-vote.no-vote svg {
  opacity: 0.6;
}

.action-badge.action-vote.no-vote .vote-label {
  opacity: 0.6;
  font-size: 12px;
}

/* Estado: ha votado - solo cambia el color del icono */
.action-badge.action-vote.has-voted svg path,
.stat-badge.action-vote.has-voted svg path {
  stroke: var(--vote-color, #3b82f6);
  fill: var(--vote-color, #3b82f6);
}

.action-badge.action-vote.has-voted span,
.stat-badge.action-vote.has-voted span {
  color: var(--vote-color, #3b82f6);
}

/* Animación al votar - pop y vuela al icono */
@keyframes voteFloatToIcon {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
  }
  20% {
    transform: translate(-50%, -50%) scale(1.4);
    opacity: 1;
  }
  25% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  95% {
    left: var(--icon-x, 50%);
    top: var(--icon-y, 50%);
    transform: translate(-50%, -50%) scale(0.4);
    opacity: 0.8;
  }
  100% {
    left: var(--icon-x, 50%);
    top: var(--icon-y, 50%);
    transform: translate(-50%, -50%) scale(0.2);
    opacity: 0;
  }
}

@keyframes buttonPop {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes ripple {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.5;
  }
  100% {
    transform: translate(-50%, -50%) scale(3);
    opacity: 0;
  }
}

.action-badge.action-vote,
.stat-badge.action-vote {
  position: relative;
  overflow: visible;
  z-index: 1;
}

.action-badge.action-vote.vote-animate::after,
.stat-badge.action-vote.vote-animate::after {
  content: "✓";
  position: fixed;
  left: var(--vote-x, 50%);
  top: var(--vote-y, 50%);
  transform: translate(-50%, -50%);
  font-size: 36px;
  font-weight: 900;
  color: var(--vote-color, #3b82f6);
  pointer-events: none;
  z-index: 99999;
  text-shadow: 
    0 0 8px var(--vote-color, #3b82f6),
    0 2px 6px rgba(0, 0, 0, 0.3);
  filter: drop-shadow(0 0 6px var(--vote-color, #3b82f6));
  animation: voteFloatToIcon 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* Efecto de onda al votar */
.action-badge.action-vote.vote-animate::before,
.stat-badge.action-vote.vote-animate::before {
  content: "";
  position: fixed;
  left: var(--vote-x, 50%);
  top: var(--vote-y, 50%);
  width: 30px;
  height: 30px;
  border-radius: 50%;
  border: 2px solid var(--vote-color, #3b82f6);
  pointer-events: none;
  z-index: 99998;
  animation: ripple 0.6s cubic-bezier(0, 0, 0.2, 1) forwards;
}

.action-badge.action-vote.vote-animate,
.stat-badge.action-vote.vote-animate {
  animation: buttonPop 0.25s ease-out;
}

.vote-label {
  font-size: 12px;
  font-weight: 500;
  transition: all 0.2s ease;
}

.total-votes {
  font-weight: 400;
  letter-spacing: 0.3px;
}

.visits-info {
  display: flex;
  align-items: center;
  gap: 4px;
}

.visits-info svg {
  opacity: 0.5;
  width: 14px;
  height: 14px;
}

/* Header del tema arriba de las tarjetas */
.poll-header {
  padding: 0px 16px 16px 16px;
  margin-top: 24px;
}

.poll-question-wrapper {
  position: relative;
  margin-bottom: 6px;
}

.poll-question {
  font-size: 17px;
  font-weight: 600;
  color: white;
  margin: 0;
  line-height: 1.3;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 1;
  line-clamp: 1;
  -webkit-box-orient: vertical;
  transition: all 0.3s ease;
  position: relative;
  cursor: pointer;
}

.poll-question.truncated {
  cursor: pointer;
}

.poll-question.truncated::after {
  content: ' ···';
  color: rgba(255, 255, 255, 0.5) !important;
  font-weight: 400;
  font-size: 14px;
}

.poll-question.expanded {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: unset;
  line-clamp: unset;
  overflow: visible;
  text-overflow: unset;
  cursor: pointer;
  white-space: normal;
}

.collapse-indicator-poll {
  color: #9ca3af !important;
  font-weight: 500;
}

.topic-meta,
.poll-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.topic-time,
.poll-time {
  color: rgba(255, 255, 255, 0.4);
  font-size: 13px;
  font-weight: 400;
}

/* Header del tema arriba de las tarjetas */
.topic-header {
  padding: 0px 16px 16px 16px;
  margin-top: 16px;
}

.header-with-avatar {
  display: flex;
  gap: 12px;
  align-items: flex-start;
  justify-content: space-between;
}

.header-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 600;
  color: white;
  border: 2px solid rgba(255, 255, 255, 0.15);
  overflow: hidden;
}

.header-avatar-real {
  border: 2px solid rgba(255, 255, 255, 0.2);
}

.header-avatar-real img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.header-content {
  flex: 1;
  min-width: 0;
}

.topic-header h3 {
  font-size: 18px;
  font-weight: 600;
  color: white;
  margin: 0 0 6px 0;
  line-height: 1.3;
}

/* Estilo especial para hashtags */
.topic-header h3[data-type="hashtag"] {
  color: #1DA1F2;
  font-weight: 700;
}

.topic-header h3[data-type="hashtag"]::before {
  content: '';
  display: inline-block;
  width: 4px;
  height: 4px;
  background: #1DA1F2;
  border-radius: 50%;
  margin-right: 8px;
  vertical-align: middle;
}

.topic-type {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.7);
  font-weight: 500;
}

/* Spans dinámicos por tamaño - treemap proporcional sin superposiciones */
.vote-card.small  { 
  grid-row: span 1; 
  grid-column: span 1; 
  min-height: 115px;
  max-height: 115px;
}
.vote-card.small-wide { 
  grid-row: span 1; 
  grid-column: span 2; 
  min-height: 115px;
  max-height: 115px;
}
.vote-card.medium { 
  grid-row: span 2; 
  grid-column: span 1; 
  min-height: 238px;
  max-height: 238px;
}
.vote-card.large  { 
  grid-row: span 2; 
  grid-column: span 2; 
  min-height: 238px;
  max-height: 238px;
}

/* En modos compactos forzamos tamaño uniforme para estética */
.vote-cards-grid.compact-two .vote-card,
.vote-cards-grid.compact-one .vote-card {
  grid-row: span 1 !important;
  grid-column: span 1 !important;
  min-height: 200px !important; /* Más altura para mostrar todo el contenido */
  height: auto;
}

/* Ajustar padding para evitar cortes */
.vote-cards-grid.compact-two .vote-card .card-content,
.vote-cards-grid.compact-one .vote-card .card-content {
  padding: 0 12px 45px 12px;
}

.vote-cards-grid.compact-two .vote-card .vote-info,
.vote-cards-grid.compact-one .vote-card .vote-info {
  bottom: 8px;
  left: 12px;
}

.vote-cards-grid.compact-two .vote-card .friend-avatars-absolute,
.vote-cards-grid.compact-one .vote-card .friend-avatars-absolute {
  bottom: 8px;
  right: 12px;
}


/* Asegurar que las tarjetas no se corten */
.vote-cards-section {
  overflow: visible;
}

.vote-card {
  overflow: hidden;
}

/* Sin efectos visuales de hover/active/focus (sin movimientos ni sombras) */
.vote-card:hover,
.vote-card:active,
.vote-card:focus {
  transform: none !important;
  box-shadow: none !important;
  outline: none !important;
  border: none !important;
}

/* Eliminar resaltes visuales al pulsar */
.vote-card:active::after,
.vote-card:focus-visible::after {
  display: none !important;
}

/* Eliminar overlay al pulsar */
.vote-card:active::before {
  display: none !important;
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.05);
  border-radius: inherit;
  pointer-events: none;
}

.vote-card:hover {
  -webkit-transform: translateY(-2px);
  -moz-transform: translateY(-2px);
  -ms-transform: translateY(-2px);
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
  border-color: rgba(255, 255, 255, 0.3);
}

.vote-card:active {
  -webkit-transform: none !important;
  -moz-transform: none !important;
  -ms-transform: none !important;
  transform: none !important;
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

/* Imagen/color de la tarjeta - adaptable al tamaño */
.vote-card-image {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0; /* permitir reducirse según el span */
}

.vote-card-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(180deg, rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.4) 100%);
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Badge pequeño con el % en esquina superior derecha */
.vote-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  font-size: 12px;
  font-weight: 700;
  color: #fff;
  background: rgba(0,0,0,0.55);
  border: 1px solid rgba(255,255,255,0.28);
  padding: 4px 8px;
  border-radius: 999px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

/* Tamaños de porcentaje según el tamaño de tarjeta */
.vote-card.large .vote-percentage {
  font-size: 24px;
}

.vote-card.medium .vote-percentage {
  font-size: 20px;
}

.vote-card.small .vote-percentage {
  font-size: 16px;
}

/* Contenido de la tarjeta */
.vote-card-content {
  padding: 10px 14px;
  text-align: left;
  flex-shrink: 0;
  flex: 1;
}

.vote-card-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 0 4px;
}

.meta-left { display: flex; align-items: center; }
.meta-right { display: flex; align-items: center; gap: 12px; }

.stat-text {
  font-size: 12px;
  font-weight: 600;
  color: rgba(255,255,255,0.8);
}
.stat-text.subtle {
  color: rgba(255,255,255,0.6);
  font-weight: 500;
}

.avatar-stack {
  display: inline-flex;
  align-items: center;
}

.avatar-sm {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.4);
  object-fit: cover;
  box-sizing: border-box;
  margin-left: -8px;
  background: rgba(255, 255, 255, 0.12);
}
.avatar-sm:first-child { margin-left: 0; }
.avatar-sm.placeholder { 
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: #fff;
}
.avatar-sm.more {
  background: rgba(0, 0, 0, 0.5);
  border-color: rgba(255, 255, 255, 0.5);
}

.chips-row {
  display: inline-flex;
  gap: 6px;
}
.chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 3px 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  color: #e5e7eb;
  background: rgba(255, 255, 255, 0.12);
  border: 1px solid rgba(255, 255, 255, 0.18);
}
.chip.subtle {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.8);
}

/* Eliminar acciones - no se usan en este diseño */

.vote-card-title {
  font-weight: 800;
  color: #ffffff;
  margin: 0;
  line-height: 1.2;
  overflow: hidden;
  text-overflow: ellipsis;
  text-shadow: 0 1px 3px rgba(0,0,0,0.3);
  letter-spacing: -0.02em;
}

/* Tamaños de título según el tamaño de tarjeta */
.vote-card.large .vote-card-title {
  font-size: 15px;
  white-space: normal;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
}

.vote-card.medium .vote-card-title {
  font-size: 13px;
  white-space: nowrap;
}

.vote-card.small .vote-card-title {
  font-size: 12px;
  white-space: nowrap;
}

.vote-card-votes {
  font-weight: 500;
  color: rgba(255, 255, 255, 0.6);
  margin: 0;
}

/* Tamaños de votos según el tamaño de tarjeta */
.vote-card.large .vote-card-votes {
  font-size: 12px;
}

.vote-card.medium .vote-card-votes {
  font-size: 11px;
}

.vote-card.small .vote-card-votes {
  font-size: 10px;
}

/* Estilos del scrollbar horizontal */
.vote-cards-container::-webkit-scrollbar {
  height: 4px;
}

.vote-cards-container::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
}

.vote-cards-container::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 2px;
}

.vote-cards-container::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* Para Firefox */
.vote-cards-container {
  scrollbar-width: thin;
  scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
}

/* Wrapper para navegación y botón de búsqueda */
.nav-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  padding: 4px 16px !important;
  min-height: 44px !important;
  max-height: 200px; /* Maximum height when visible */
  /* IMPORTANTE: Permitir arrastre desde toda el área */
  cursor: grab;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  pointer-events: auto;
  /* Allow expanded buttons to overflow when visible */
  overflow: visible;
  /* Smooth transition for auto-hide */
  transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out, opacity 0.3s ease-in-out, margin 0.3s ease-in-out;
}

.nav-wrapper.nav-hidden {
  max-height: 0 !important;
  min-height: 0 !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  opacity: 0;
  pointer-events: none;
  overflow: hidden; /* Hide overflow when collapsed */
}

.nav-wrapper:active {
  cursor: grabbing;
}

/* Limitar ancho del nav en desktop para alinearlo con las modales */
@media (min-width: 768px) {
  .nav-wrapper {
    width: 100%; /* Mantener width 100% pero limitado por max-width */
    max-width: 700px !important; /* Forzar el max-width */
    margin-left: 0; /* Alinear a la izquierda */
    margin-right: auto; /* Dejar espacio a la derecha */
  }
}

/* Navegación minimalista */
.nav-minimal {
  display: flex;
  align-items: center;
  gap: 2px;
  justify-content: flex-start;
  padding: 2px 2px !important;
  padding-right: 8px !important; /* Extra space to avoid clipping */
  position: relative;
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: none;
  -ms-overflow-style: none;
  scroll-behavior: smooth; /* Smooth scrolling */
  flex: 1; /* Allow to shrink when buttons expand */
  min-width: 0; /* Allow flex item to shrink below content size */
  -webkit-overflow-scrolling: touch;
  white-space: nowrap;
  z-index: 1; /* Bajo z-index para no interferir con otros elementos */
  min-height: 40px !important; /* Asegurar altura mínima para el input absoluto */
  /* Mask gradient to indicate more content */
  -webkit-mask-image: linear-gradient(to right, black 0%, black calc(100% - 20px), transparent 100%);
  mask-image: linear-gradient(to right, black 0%, black calc(100% - 20px), transparent 100%);
}

/* Ocultar botones cuando search está abierto - manejado por JS */
.nav-minimal.search-active .nav-chip,
.nav-minimal.search-active .nav-divider {
  display: none;
}

.nav-minimal::-webkit-scrollbar {
  display: none;
}

.nav-chip {
  display: inline-flex;
  align-items: center;
  padding: 6px 14px !important;
  border: none;
  border-radius: 20px;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  font-size: 15px;
  font-weight: 400;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  cursor: pointer;
  -webkit-transition: all 0.15s ease;
  -moz-transition: all 0.15s ease;
  transition: all 0.15s ease;
  white-space: nowrap;
  position: relative;
  flex-shrink: 0;
  min-width: -webkit-fit-content;
  min-width: -moz-fit-content;
  min-width: fit-content;
  /* Los botones capturan sus propios eventos (tienen stopPropagation) */
  pointer-events: auto;
}

.nav-chip:hover:not(.active) {
  color: rgba(255, 255, 255, 0.7);
}

.nav-chip.active {
  color: #ffffff;
  background: rgba(255, 255, 255, 0.15);
  font-weight: 600;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.nav-divider {
  color: rgba(255, 255, 255, 0.25);
  font-size: 14px;
  font-weight: 300;
  margin: 0 2px;
  user-select: none;
}

/* Group for search and menu buttons */
.nav-buttons-group {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-left: auto; /* Push to the right */
  z-index: 100;
  pointer-events: auto;
  /* Allow overflow for expanded buttons */
  overflow: visible;
}

/* Individual icon buttons (search and menu) */
.nav-icon-btn {
  width: 36px !important;
  height: 36px !important;
  padding: 0 !important;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  color: rgba(255, 255, 255, 0.9);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  pointer-events: auto;
}

.nav-icon-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 1);
}

.nav-icon-btn:active {
  transform: scale(0.95);
}

/* Legacy support for old class name */
.nav-search-btn {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 40px;
  height: 40px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  color: rgba(255, 255, 255, 0.9);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 100;
  pointer-events: auto;
}

.nav-search-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 1);
}

.nav-search-btn:active {
  transform: translateY(-50%) scale(0.95);
}

/* Search overlay - appears above navigation */
.nav-search-overlay {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0 16px;
  z-index: 2;
  animation: slideInRight 0.2s ease-out;
}

/* Ocultar botones de navegación cuando el search está abierto - manejado por JS */
.nav-minimal.search-active .nav-chip,
.nav-minimal.search-active .nav-divider,
.nav-minimal.search-active .nav-search-btn {
  display: none;
}

.nav-search-overlay .nav-search-icon {
  position: absolute;
  left: 28px;
  color: rgb(255, 255, 255) !important;
  flex-shrink: 0;
  pointer-events: none;
  z-index: 3;
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.nav-search-icon {
  color: rgba(255, 255, 255,0.8) !important;
  flex-shrink: 0;
}

.nav-search-input-full {
  flex: 1;
  border: none;
  background: rgba(0, 0, 0);
  color: #ffffff;
  font-size: 16px; /* Mínimo 16px para evitar zoom en iOS */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  outline: none;
  min-width: 100%;
  padding: 10px 120px 10px 40px;
  border-radius: 20px;
  position: relative;
  /* Quitar estilos nativos de Safari */
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

.nav-search-input-full::placeholder {
  color: rgb(255, 255, 255);
}

/* Ocultar la X nativa del navegador en inputs type="search" */
.nav-search-input-full::-webkit-search-cancel-button {
  display: none;
  -webkit-appearance: none;
}

.nav-search-input-full::-webkit-search-decoration {
  display: none;
  -webkit-appearance: none;
}

.nav-search-clear-btn {
  position: absolute;
  right: 50px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 6px 12px;
  border: none;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.9);
  font-size: 13px;
  font-weight: 500;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  cursor: pointer;
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  transition: all 0.2s ease;
  flex-shrink: 0;
  white-space: nowrap;
}

.nav-search-clear-btn:hover {
  background: rgba(255, 255, 255, 0.25);
  color: rgba(255, 255, 255, 1);
}

.nav-search-close-btn {
  position: absolute;
  right: 21px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.7);
  cursor: pointer;
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.nav-search-close-btn:hover {
  background: rgba(255, 255, 255, 0.25);
  color: rgba(255, 255, 255, 1);
}

/* Nav chip dropdown wrapper */
.nav-chip-wrapper {
  position: relative;
  display: inline-flex;
  flex-shrink: 0;
}

.nav-dropdown {
  position: fixed;
  bottom: 100px;
  left: 50%;
  transform: translateX(-50%);
  min-width: 280px;
  max-width: 90vw;
  max-height: 50vh;
  background: rgba(0, 0, 0, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 16px;
  overflow: hidden;
  z-index: 99999;
  display: flex;
  flex-direction: column;
}

.sheet-content {
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  cursor: auto; /* Anular el cursor grab del padre */
  user-select: text; /* Permitir selección de texto en el contenido */
}
/* Feed en modo expandido */
.feed-list {
  display: grid;
  gap: 10px;
}
.feed-post {
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(0, 0, 0, 0.25);
  border-radius: 10px;
  padding: 10px;
}
.feed-title {
  font:
    600 14px/1.2 system-ui,
    sans-serif;
  margin-bottom: 6px;
}
.feed-actions {
  display: flex;
  gap: 8px;
}
.feed-btn {
  padding: 6px 10px;
  border-radius: 8px;
  border: 1px solid rgba(255, 255, 255, 0.28);
  background: rgba(255, 255, 255, 0.08);
  color: #fff;
  cursor: pointer;
}
.feed-btn:hover {
  border-color: rgba(255, 255, 255, 0.42);
}
/* Country chart */
.country-chart {
  width: 100%;
  height: 12px;
  border-radius: 999px;
  overflow: hidden;
  display: flex;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  margin: 6px 0 8px;
}
.country-chart .seg {
  height: 100%;
}
.country-chart-pcts {
  display: flex;
  flex-wrap: wrap;
  gap: 6px 10px;
  margin: 6px 0 8px;
}
.country-chart-pcts .pct-item {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font:
    12px/1.2 system-ui,
    sans-serif;
}
.country-chart-pcts .sw {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  border: 1px solid #00000055;
}
.country-chart-pcts .pct {
  opacity: 0.9;
}

/* Navigation breadcrumb */
.navigation-breadcrumb {
  position: fixed;
  top: 8px;
  left: 20px;
  z-index: 10005;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.breadcrumb-item {
  background: none;
  border: none;
  color: #ffffff;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  padding: 6px 10px;
  border-radius: 6px;
  transition: all 0.2s ease;
  text-decoration: none;
  display: flex;
  align-items: center;
}

.breadcrumb-item:hover {
  background: rgba(255, 255, 255, 0.1);
  -webkit-transform: translateY(-1px);
  -moz-transform: translateY(-1px);
  -ms-transform: translateY(-1px);
  transform: translateY(-1px);
}

.breadcrumb-item.active {
  background: rgba(255, 255, 255, 0.2);
  cursor: pointer;
}

.breadcrumb-item.dropdown-trigger {
  cursor: pointer;
}

.breadcrumb-separator {
  color: #888;
  font-size: 12px;
  margin: 0 4px;
}

.breadcrumb-help {
  margin-left: 16px;
  padding-left: 16px;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
}

.breadcrumb-help small {
  color: #aaa;
  font-size: 11px;
  font-weight: 400;
}

/* Breadcrumb dropdown */
.breadcrumb-dropdown-wrapper {
  position: relative;
  display: inline-flex;
}

.breadcrumb-dropdown {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  min-width: 250px;
  max-width: 400px;
  max-height: 400px;
  background: rgba(0, 0, 0, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.7);
  overflow: hidden;
  z-index: 99999;
  display: flex;
  flex-direction: column;
}

.dropdown-loading {
  padding: 20px 16px;
  text-align: center;
  color: var(--neo-text-light, #9ca3af);
  font-size: 13px;
  font-weight: 500;
}

.dropdown-search {
  padding: 12px;
  border-bottom: none;
}

.dropdown-search input {
  width: 100%;
  padding: 12px 16px;
  background: var(--neo-bg, #e0e5ec);
  border: none;
  border-radius: 12px;
  color: var(--neo-text, #6b7280);
  font-size: 16px;
  font-weight: 500;
  outline: none;
  transition: all 0.15s ease;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  /* Neumorfismo inset */
  box-shadow: 
    inset 3px 3px 6px var(--neo-shadow-dark, rgba(163, 177, 198, 0.5)),
    inset -3px -3px 6px var(--neo-shadow-light, rgba(255, 255, 255, 0.6));
}

.dropdown-search input:focus {
  box-shadow: 
    inset 4px 4px 8px var(--neo-shadow-dark, rgba(163, 177, 198, 0.6)),
    inset -4px -4px 8px var(--neo-shadow-light, rgba(255, 255, 255, 0.7));
}

.dropdown-search input::placeholder {
  color: var(--neo-text-light, #9ca3af);
  opacity: 0.8;
}

.dropdown-options {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  max-height: none !important;
  flex: 1 !important;
  min-height: 0 !important;
  padding: 8px;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  touch-action: pan-y;
}

.dropdown-options::-webkit-scrollbar {
  width: 4px;
}

.dropdown-options::-webkit-scrollbar-track {
  background: transparent;
  margin: 8px;
}

.dropdown-options::-webkit-scrollbar-thumb {
  background: var(--neo-shadow-dark, rgba(163, 177, 198, 0.5));
  border-radius: 4px;
}

.dropdown-options::-webkit-scrollbar-thumb:hover {
  background: var(--neo-text-light, #9ca3af);
}

.dropdown-option {
  width: 100%;
  padding: 12px 14px;
  background: transparent;
  border: none;
  color: var(--neo-text, #6b7280);
  font-size: 14px;
  font-weight: 500;
  text-align: left;
  cursor: pointer;
  border-radius: 10px;
  transition: all 0.15s ease;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-bottom: 4px;
}

.dropdown-option:last-child {
  margin-bottom: 0;
}

.dropdown-option:hover {
  background: var(--neo-bg, #e0e5ec);
  box-shadow: 
    inset 3px 3px 6px var(--neo-shadow-dark, rgba(163, 177, 198, 0.4)),
    inset -3px -3px 6px var(--neo-shadow-light, rgba(255, 255, 255, 0.6));
}

.dropdown-option:active {
  box-shadow: 
    inset 4px 4px 8px var(--neo-shadow-dark, rgba(163, 177, 198, 0.5)),
    inset -4px -4px 8px var(--neo-shadow-light, rgba(255, 255, 255, 0.5));
}

.dropdown-no-results {
  padding: 20px 16px;
  text-align: center;
  color: var(--neo-text-light, #9ca3af);
  font-size: 13px;
  font-weight: 500;
}

/* Global dropdown overlay and container */
.global-dropdown-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 200000;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  -webkit-backdrop-filter: blur(8px);
  backdrop-filter: blur(8px);
  overflow-y: auto;
  padding: 80px 12px 120px;
  -webkit-overflow-scrolling: touch;
}

/* CSS ya no necesario - el nav se controla vía bind:hidden en Svelte */

/* En desktop, menos padding inferior */
@media (min-width: 768px) {
  .global-dropdown-overlay {
    padding: 70px 20px 70px;
    align-items: center;
  }
}

.global-dropdown {
  position: fixed !important;
  top: 80px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  min-width: 300px;
  max-width: 85vw;
  width: calc(100% - 30px);
  height: calc(100vh - 80px - 140px) !important;
  max-height: 450px !important;
  /* Neumorfismo */
  background: var(--neo-bg, #e0e5ec);
  border: none;
  border-radius: 16px;
  box-shadow: 
    8px 8px 24px var(--neo-shadow-dark, rgba(163, 177, 198, 0.6)),
    -8px -8px 24px var(--neo-shadow-light, rgba(255, 255, 255, 0.7));
  overflow: hidden !important;
  display: flex;
  flex-direction: column;
  animation: dropdownFadeIn 0.2s ease-out;
  touch-action: auto;
  pointer-events: auto;
  z-index: 200001 !important;
}

/* En desktop, más espacio disponible */
@media (min-width: 768px) {
  .global-dropdown {
    top: 80px !important;
    height: auto !important;
    max-height: 600px !important;
    width: auto;
    max-width: 500px;
  }
}

@keyframes dropdownFadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) scale(0.95) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) scale(1) translateY(0);
  }
}

/* Barra de escala estilo Google Maps (reemplaza legend-panel) */
.altitude-indicator {
  position: fixed;
  left: 10px;
  left: calc(10px + env(safe-area-inset-left)); /* Safe area izquierda */
  bottom: 70px;
  bottom: calc(70px + env(safe-area-inset-bottom)); /* Safe area inferior */
  z-index: 25000; /* Por encima del BottomSheet (20000) */
  background: transparent;
  padding: 5px 8px;
  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  pointer-events: auto; /* Asegurar que sea clickeable */
}

/* Contenedor de indicadores flotantes en sheet-content */
/* Ahora vacío porque la navegación se movió al Header */
.floating-indicators-content {
  display: none; /* Ocultar - navegación ahora en Header */
}

/* Contenedor de indicadores flotantes (legacy) */
.floating-indicators {
  position: absolute;
  left: 0;
  right: 0;
  top: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 10px;
  pointer-events: none;
  z-index: 100;
}

/* Contenedor de indicadores flotantes en el nav */
.nav-floating-indicators {
  position: absolute;
  left: 0;
  right: 0;
  top: -50px; /* Más arriba del nav */
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 10px;
  pointer-events: none;
}

/* Indicador flotante dentro del BottomSheet */
.altitude-indicator-floating {
  background: transparent;
  padding: 5px 8px;
  font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  user-select: none;
  pointer-events: auto; /* Pero sus hijos sí */
  color: #9ca3af; /* Color gris */
  display: inline-flex;
  align-items: center; /* centrar verticalmente con los chips */
  height: 36px; /* igual que los nav-chip overrides */
}

/* Botón de pantalla completa flotante */
.fullscreen-btn-floating {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.85);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  -webkit-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  -moz-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
  pointer-events: auto;
}

.fullscreen-btn-floating:hover {
  background: rgba(0, 0, 0, 0.95);
  border-color: rgba(255, 255, 255, 0.2);
  -webkit-transform: translateY(-4px) scale(1.05) translateZ(0);
  -moz-transform: translateY(-4px) scale(1.05) translateZ(0);
  -ms-transform: translateY(-4px) scale(1.05) translateZ(0);
  transform: translateY(-4px) scale(1.05) translateZ(0);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3);
}

.fullscreen-btn-floating:active {
  -webkit-transform: translateY(-2px) scale(0.98) translateZ(0);
  -moz-transform: translateY(-2px) scale(0.98) translateZ(0);
  -ms-transform: translateY(-2px) scale(0.98) translateZ(0);
  transform: translateY(-2px) scale(0.98) translateZ(0);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
}

/*
  Al usar nav-chip en los botones flotantes, queremos que adopten el estilo
  de los chips de navegación (pill), no el circular. Estas reglas overridean
  el estilo circular cuando están dentro del contenedor de indicadores flotantes.
*/
.floating-indicators-content .nav-chip.settings-btn-floating,
.floating-indicators-content .nav-chip.locate-btn-floating,
.floating-indicators-content .nav-chip.fullscreen-btn-floating {
  width: auto;
  height: 36px;
  padding: 8px 14px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.7);
  border: none;
  box-shadow: none;
  -webkit-backdrop-filter: none;
  backdrop-filter: none;
  -webkit-transition: none;
  -moz-transition: none;
  transition: none; /* sin efectos */
}

.floating-indicators-content .nav-chip.settings-btn-floating:hover,
.floating-indicators-content .nav-chip.locate-btn-floating:hover,
.floating-indicators-content .nav-chip.fullscreen-btn-floating:hover {
  background: rgba(255, 255, 255, 0.1); /* sin cambio */
  color: rgba(255, 255, 255, 0.7); /* sin cambio */
}

.floating-indicators-content .nav-chip.settings-btn-floating svg,
.floating-indicators-content .nav-chip.locate-btn-floating svg,
.floating-indicators-content .nav-chip.fullscreen-btn-floating svg {
  width: 16px;
  height: 16px;
}

.floating-indicators-content .nav-chip.settings-btn-floating,
.floating-indicators-content .nav-chip.locate-btn-floating,
.floating-indicators-content .nav-chip.fullscreen-btn-floating {
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.floating-indicators-content .nav-chip.settings-btn-floating:focus,
.floating-indicators-content .nav-chip.locate-btn-floating:focus,
.floating-indicators-content .nav-chip.fullscreen-btn-floating:focus {
  outline: none;
  box-shadow: none;
}

/* Neutralizar efectos active/hover de estilos circulares anteriores dentro del contenedor */
.floating-indicators-content .settings-btn-floating:hover,
.floating-indicators-content .settings-btn-floating:active,
.floating-indicators-content .locate-btn-floating:hover,
.floating-indicators-content .locate-btn-floating:active,
.floating-indicators-content .fullscreen-btn-floating:hover,
.floating-indicators-content .fullscreen-btn-floating:active {
  -webkit-transform: none;
  -moz-transform: none;
  -ms-transform: none;
  transform: none;
  box-shadow: none;
  border-color: rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.7);
}

/* Botón de localización flotante */
.locate-btn-floating {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.85);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  -webkit-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  -moz-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
  pointer-events: auto;
}

.locate-btn-floating:hover {
  background: rgba(0, 0, 0, 0.95);
  border-color: rgba(255, 255, 255, 0.2);
  -webkit-transform: translateY(-4px) scale(1.05) translateZ(0);
  -moz-transform: translateY(-4px) scale(1.05) translateZ(0);
  -ms-transform: translateY(-4px) scale(1.05) translateZ(0);
  transform: translateY(-4px) scale(1.05) translateZ(0);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3);
}

.locate-btn-floating:active {
  -webkit-transform: translateY(-2px) scale(0.98) translateZ(0);
  -moz-transform: translateY(-2px) scale(0.98) translateZ(0);
  -ms-transform: translateY(-2px) scale(0.98) translateZ(0);
  transform: translateY(-2px) scale(0.98) translateZ(0);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Botón de ajustes flotante (3 puntos) */
.settings-btn-floating {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.85);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  -webkit-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  -moz-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
  pointer-events: auto;
}

.settings-btn-floating:hover {
  background: rgba(0, 0, 0, 0.95);
  border-color: rgba(255, 255, 255, 0.2);
  -webkit-transform: translateY(-4px) scale(1.05) translateZ(0);
  -moz-transform: translateY(-4px) scale(1.05) translateZ(0);
  -ms-transform: translateY(-4px) scale(1.05) translateZ(0);
  transform: translateY(-4px) scale(1.05) translateZ(0);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3);
}

.settings-btn-floating:active {
  -webkit-transform: translateY(-2px) scale(0.98) translateZ(0);
  -moz-transform: translateY(-2px) scale(0.98) translateZ(0);
  -ms-transform: translateY(-2px) scale(0.98) translateZ(0);
  transform: translateY(-2px) scale(0.98) translateZ(0);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
}

.scale-bar {
  width: 60px;
  height: 2px; /* Más delgada */
  background: #9ca3af; /* Color gris */
  position: relative;
}

.scale-bar::before,
.scale-bar::after {
  content: '';
  position: absolute;
  width: 1.5px; /* Más delgados */
  height: 6px; /* Más cortos */
  background: #9ca3af; /* Color gris */
  bottom: 0;
}

.scale-bar::before {
  left: 0;
}

.scale-bar::after {
  right: 0;
}

.altitude-value {
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(-50%);
  color: #9ca3af; /* Color gris */
  font-size: 11px;
  font-weight: 400;
  margin: 0;
  white-space: nowrap;
  letter-spacing: 0.3px;
}

/* Hint row under floating buttons: arrow + text */
.floating-hint-row {
  display: flex;
  align-items: center;
  justify-content: center; /* centrar horizontal */
  gap: 8px;
  width: 100%;
  margin-top: 0; /* Reducido - navegación ahora en Header */
  pointer-events: auto; /* permitir click */
  /* Chip-like background for readability */
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.12);
  border-radius: 12px;
  padding: 6px 10px;
  color: rgba(255, 255, 255, 0.85);
  text-shadow: 0 1px 2px rgba(0,0,0,0.35);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  cursor: pointer;
}

.floating-hint-arrow {
  color: rgba(255, 255, 255, 0.9);
  font-size: 12px;
  line-height: 1;
}

.floating-hint-text {
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.2px;
}

@keyframes arrowFloat {
  0% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
  100% { transform: translateY(0); }
}

/* Sección de votación */
.vote-section {
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.vote-title {
  font-size: 14px;
  font-weight: 600;
  color: #ffffff;
  margin: 0 0 12px 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.vote-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.vote-option {
  display: flex;
  align-items: center;
  gap: 10px;
}

.vote-label {
  font-size: 13px;
  font-weight: 500;
  color: #ffffff;
  position: relative;
  z-index: 1;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.vote-count {
  font-size: 11px;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.8);
  position: relative;
  z-index: 1;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.vote-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: #ffffff;
  padding: 8px 16px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  backdrop-filter: blur(10px);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  flex-shrink: 0;
}

.vote-btn:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.5);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.vote-btn:active {
  transform: translateY(0);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
}

/* Search results dropdown */
.nav-search-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  max-height: 300px;
  background: rgba(0, 0, 0, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  margin-top: 8px;
  overflow-y: auto;
  overflow-x: hidden;
  z-index: 100;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.7);
  -webkit-overflow-scrolling: touch;
}

.nav-search-results::-webkit-scrollbar {
  width: 6px;
}

.nav-search-results::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.nav-search-results::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.nav-search-results::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

.search-loading {
  padding: 16px;
  text-align: center;
  color: rgba(255, 255, 255, 0.6);
  font-size: 13px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.search-result-item {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: none;
  border: none;
  color: #ffffff;
  font-size: 14px;
  font-weight: 400;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.search-result-item:last-child {
  border-bottom: none;
}

.search-result-item:hover {
  background: rgba(255, 255, 255, 0.1);
}

.search-result-item:active {
  background: rgba(255, 255, 255, 0.15);
}

.result-icon {
  font-size: 18px;
  flex-shrink: 0;
}

.result-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Estilos para scroll infinito de encuestas */
.more-polls-divider {
  display: flex;
  align-items: center;
  gap: 16px;
  margin: 32px 0 24px 0;
  padding: 0 16px;
}

.divider-line {
  flex: 1;
  height: 1px;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
}

.divider-text {
  font-size: 13px;
  font-weight: 500;
  color: rgba(255, 255, 255, 0.6);
  white-space: nowrap;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

/* Contenedor principal con scroll que incluye TODO */
.main-scroll-container {

  flex: 1;
  overflow-y: auto; /* Auto en lugar de scroll para mejorar compatibilidad */
  overflow-x: hidden;
  /* Scroll suave en móvil - CRÍTICO para iOS */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  /* Asegurar que el scroll funciona */
  position: relative;
  /* Altura calculada dinámicamente */
  /*max-height: calc(100vh - 120px) !important;*/
  max-height: calc(var(--vh, 1vh) * 100 - 120px) !important;  /* Fix teclado móvil */
  /* Padding para el contenido */
  padding: 0 0 20px 0;
  pointer-events: auto;
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* Scrollbar personalizada (solo desktop) */
.main-scroll-container::-webkit-scrollbar {
  width: 6px;
}

.main-scroll-container::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.main-scroll-container::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.main-scroll-container::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* En móvil, ocultar scrollbar pero mantener funcionalidad */
@media (max-width: 768px) {
  .main-scroll-container::-webkit-scrollbar {
    display: none;
    width: 0;
  }
  .main-scroll-container {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
}

/* Botón flotante "volver al inicio" */
.scroll-to-top-btn {
  position: fixed;
  right: 20px;
  right: calc(20px + env(safe-area-inset-right));
  bottom: 140px;
  bottom: calc(140px + env(safe-area-inset-bottom));
  width: 52px;
  height: 52px;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.85);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  -webkit-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  -moz-transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

.scroll-to-top-btn svg {
  color: #ffffff;
  width: 24px;
  height: 24px;
  -webkit-transition: -webkit-transform 0.2s ease;
  transition: transform 0.2s ease;
}

.scroll-to-top-btn:hover {
  background: rgba(0, 0, 0, 0.95);
  border-color: rgba(255, 255, 255, 0.2);
  -webkit-transform: translateY(-4px) translateZ(0);
  transform: translateY(-4px) translateZ(0);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(0, 0, 0, 0.3);
}

.scroll-to-top-btn:hover svg {
  -webkit-transform: translateY(-2px);
  transform: translateY(-2px);
}

.scroll-to-top-btn:active {
  -webkit-transform: translateY(-2px) scale(0.95) translateZ(0);
  transform: translateY(-2px) scale(0.95) translateZ(0);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
}

.additional-polls-container::-webkit-scrollbar {
  width: 6px;
}

.additional-polls-container::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 3px;
}

.additional-polls-container::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 3px;
}

.additional-polls-container::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

.poll-item {
  margin-bottom: 0;
  padding: 0;
  animation: fadeInUp 0.4s ease-out;
  position: relative;
  overflow: visible;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.poll-header {
  margin-bottom: 16px;
}

.poll-question[data-type="hashtag"] {
  color: #3b82f6;
  font-weight: 700;
}

.poll-type {
  font-size: 12px;
  font-weight: 400;
  color: rgba(255, 255, 255, 0.5);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.no-polls-message {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  padding: 48px 24px;
  color: rgba(255, 255, 255, 0.4);
  text-align: center;
}

.no-polls-message p {
  margin: 0;
  font-size: 14px;
  font-weight: 400;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.loading-more {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 24px;
  color: rgba(255, 255, 255, 0.5);
  font-size: 13px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

.loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-top-color: rgba(255, 255, 255, 0.6);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Ajuste para vote-card como botón */
.vote-card {
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  width: 100%;
  padding: 0;
  font-family: inherit;
}

.vote-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.vote-card:active {
  transform: none !important;
  box-shadow: none !important;
  outline: none !important;
  border: none !important;
  background: rgba(255,255,255,0.08) !important;
}

.vote-card:focus-visible {
  outline: 2px solid rgba(255, 255, 255, 0.5);
  outline-offset: 2px;
}

/* Indicadores de paginación tipo Instagram */
.pagination-dots {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px;
  margin: 0 8px;
  overflow-x: auto;
  overflow-y: hidden;
  max-width: 100%;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

.pagination-dots.many-pages {
  justify-content: flex-start;
}

.pagination-dots::-webkit-scrollbar {
  display: none; /* Chrome, Safari, Opera */
}

.pagination-dot {
  width: 8px;
  height: 8px;
  min-width: 8px;
  min-height: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.4);
  border: none;
  padding: 0;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  flex-shrink: 0;
}

.pagination-dot:hover {
  background: rgba(255, 255, 255, 0.6);
  transform: scale(1.3);
}

.pagination-dot.active {
  background: rgba(255, 255, 255, 1);
  width: 10px;
  height: 10px;
  min-width: 10px;
  min-height: 10px;
}

.pagination-dot:focus-visible {
  outline: 2px solid rgba(255, 255, 255, 0.5);
  outline-offset: 3px;
}

/* Indicador numérico para muchas páginas */
.pagination-numeric {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 12px;
  margin: 0 8px;
}

.pagination-arrow {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}

.pagination-arrow:hover {
  background: rgba(255, 255, 255, 0.2);
  border-color: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

.pagination-arrow:active {
  transform: scale(0.95);
}

.pagination-text {
  color: rgba(255, 255, 255, 0.8);
  font-size: 13px;
  font-weight: 500;
  white-space: nowrap;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

/* Transiciones de página */
.page-transition {
  animation-duration: 400ms;
  animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  animation-fill-mode: both;
}

.page-transition-next {
  animation-name: slideOutToLeftAndInFromRight;
}

.page-transition-prev {
  animation-name: slideOutToRightAndInFromLeft;
}

@keyframes slideOutToLeftAndInFromRight {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  50% {
    transform: translateX(-100%);
    opacity: 0;
  }
  51% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutToRightAndInFromLeft {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  50% {
    transform: translateX(100%);
    opacity: 0;
  }
  51% {
    transform: translateX(-100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Anuncios */
.ad-card {
  margin: 0;
  padding: 16px 16px 20px 16px;
  background: transparent;
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 0;
}

.ad-label {
  display: inline-block;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.35);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
  font-weight: 500;
}

.ad-content {
  display: flex;
  gap: 16px;
  align-items: center;
}

.ad-image {
  width: 70px;
  height: 70px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  overflow: hidden;
}

.ad-image svg {
  opacity: 0.3;
}

.ad-image-real {
  background: transparent;
}

.ad-image-real img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 8px;
}

.ad-text h4 {
  font-size: 15px;
  font-weight: 600;
  color: white;
  margin: 0 0 4px 0;
}

.ad-text p {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.5);
  margin: 0 0 10px 0;
}

.ad-cta {
  padding: 6px 14px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 18px;
  color: rgba(255, 255, 255, 0.7);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.ad-cta:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.25);
  color: white;
}

/* Sugerencias de seguimiento */
.suggestions-card {
  margin: 0;
  padding: 16px 16px 20px 16px;
  background: transparent;
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.suggestions-title {
  font-size: 16px;
  font-weight: 600;
  color: white;
  margin: 0 0 14px 0;
}

.suggestions-scroll {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 4px 0 12px 0;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.suggestions-scroll::-webkit-scrollbar {
  display: none;
}

.suggestion-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 130px;
  padding: 12px;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 12px;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.suggestion-item:hover {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.12);
  transform: translateY(-1px);
}

.suggestion-avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  font-weight: 600;
  color: white;
  margin-bottom: 10px;
  border: 2px solid rgba(255, 255, 255, 0.1);
}

.suggestion-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  margin-bottom: 12px;
  text-align: center;
}

.suggestion-name {
  font-size: 14px;
  font-weight: 600;
  color: white;
}

.suggestion-bio {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
}

.suggestion-followers {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.4);
}

.suggestion-follow {
  padding: 6px 18px;
  background: rgba(255, 255, 255, 0.15);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 18px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.suggestion-follow:hover {
  background: rgba(255, 255, 255, 0.25);
  border-color: rgba(255, 255, 255, 0.3);
  transform: scale(1.03);
}

.suggestion-follow:active {
  transform: scale(0.97);
}

/* Gráfico de votaciones para encuestas de una opción */
.vote-chart-container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 0;
  padding: 46px 12px 10px 12px;
  position: relative;
}

.vote-chart {
  width: 100%;
  flex: 1;
  min-height: 100px;
  cursor: crosshair;
  position: relative;
  margin-top: 0;
}


.time-range-selector {
  display: flex;
  gap: 12px;
  justify-content: flex-start;
}

.time-range-bottom {
  margin-top: 6px;
  margin-bottom: 0;
  padding-left: 4px;
  flex-shrink: 0;
}

.time-range-btn {
  padding: 0;
  background: none;
  border: none;
  color: rgba(255, 255, 255, 0.5);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  outline: none;
}

.time-range-btn:hover {
  color: rgba(255, 255, 255, 0.7);
}

.time-range-btn:focus {
  outline: none !important;
  border: none !important;
}

.time-range-btn:active {
  outline: none !important;
  border: none !important;
}

.time-range-btn.active {
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  color: white;
  font-weight: 600;
}

/* Tooltip interactivo del gráfico */
.chart-tooltip {
  position: absolute;
  top: 50px;
  left: 12px;
  pointer-events: none;
  z-index: 9999;
  animation: tooltipFadeIn 0.15s ease-out;
}

@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tooltip-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 4px;
}

.tooltip-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.tooltip-date {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.8);
  font-weight: 500;
  white-space: nowrap;
}

.tooltip-total {
  font-size: 13px;
  color: white;
  font-weight: 700;
  display: flex;
  align-items: center;
  white-space: nowrap;
}

.tooltip-option-name {
  font-size: 11px;
  font-weight: 600;
  white-space: nowrap;
  min-width: 60px;
}

.tooltip-value {
  font-size: 13px;
  color: white;
  font-weight: 700;
  display: flex;
  align-items: center;
  white-space: nowrap;
}

/* Ajustar altura del header en tarjetas con gráfico */
.vote-cards-grid.compact-one .vote-card {
  position: relative;
  overflow: visible;
}

.vote-cards-grid.compact-one .vote-card .card-header {
  min-height: auto;
  padding: 10px 12px 6px 12px;
  align-items: center;
  position: relative;
  z-index: 1;
  background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, transparent 100%);
  pointer-events: none;
}

.vote-cards-grid.compact-one .vote-card .card-header .question-title {
  min-height: auto;
  font-size: 14px;
  line-height: 1.2;
  margin: 0;
  max-height: 2.4em;
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
}

.vote-cards-grid.compact-one .vote-card .card-header .creator-avatar {
  width: 28px;
  height: 28px;
  min-width: 28px;
  min-height: 28px;
  align-self: center;
  pointer-events: auto;
}

.vote-cards-grid.compact-one .vote-card .card-content {
  padding: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  z-index: 1;
  overflow: visible;
}

/* Overlay de carga minimalista */
.data-loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(3px);
  -webkit-backdrop-filter: blur(3px);
  z-index: 9999;
  pointer-events: auto;
  cursor: wait;
}

.vote-cards-grid.compact-one .vote-card .vote-chart-container {
  overflow: hidden;
  border-radius: 16px;
}
