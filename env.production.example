# ===============================================
# VOTETOK - PRODUCTION ENVIRONMENT CONFIGURATION
# ===============================================

# ===============================================
# APPLICATION
# ===============================================
NODE_ENV=production
PORT=3000
PUBLIC_URL=https://voutop.com
CORS_ORIGINS=https://voutop.com,https://www.voutop.com

# ===============================================
# DATABASE
# ===============================================
DATABASE_URL=postgresql://voutop:${DB_PASSWORD}@postgres:5432/voutop_db
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20
DATABASE_POOL_IDLE_TIMEOUT=30000
DATABASE_CONNECTION_TIMEOUT=5000

# ===============================================
# REDIS CACHE
# ===============================================
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_KEY_PREFIX=voutop:
REDIS_TTL_DEFAULT=300
REDIS_TTL_POLLS=600
REDIS_TTL_USERS=3600
REDIS_TTL_SESSIONS=86400

# ===============================================
# SECURITY
# ===============================================
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_REFRESH_EXPIRES_IN=30d
APP_SECRET=${APP_SECRET}
SESSION_SECRET=${SESSION_SECRET}
COOKIE_SECURE=true
COOKIE_HTTPONLY=true
COOKIE_SAMESITE=strict
COOKIE_DOMAIN=.voutop.com

# ===============================================
# RATE LIMITING
# ===============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_TRUST_PROXY=true
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# ===============================================
# FILE STORAGE
# ===============================================
STORAGE_TYPE=s3
S3_ENDPOINT=https://s3.amazonaws.com
S3_REGION=us-east-1
S3_ACCESS_KEY=${S3_ACCESS_KEY}
S3_SECRET_KEY=${S3_SECRET_KEY}
S3_BUCKET_ASSETS=voutop-assets
S3_BUCKET_UPLOADS=voutop-uploads
S3_BUCKET_BACKUPS=voutop-backups
S3_PRESIGNED_URL_EXPIRES=3600
CDN_URL=https://cdn.voutop.com

# ===============================================
# EMAIL SERVICE
# ===============================================
EMAIL_ENABLED=true
EMAIL_FROM=noreply@voutop.com
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=${SENDGRID_API_KEY}
EMAIL_TEMPLATE_WELCOME=d-welcome-template-id
EMAIL_TEMPLATE_RESET=d-reset-template-id
EMAIL_TEMPLATE_VERIFY=d-verify-template-id

# ===============================================
# EXTERNAL APIS
# ===============================================
# Geolocation
IPAPI_KEY=${IPAPI_KEY}
MAPBOX_ACCESS_TOKEN=${MAPBOX_ACCESS_TOKEN}

# Analytics
GOOGLE_ANALYTICS_ID=${GA_MEASUREMENT_ID}
MIXPANEL_TOKEN=${MIXPANEL_TOKEN}
SENTRY_DSN=${SENTRY_DSN}

# Social Media
TWITTER_API_KEY=${TWITTER_API_KEY}
TWITTER_API_SECRET=${TWITTER_API_SECRET}
FACEBOOK_APP_ID=${FACEBOOK_APP_ID}
FACEBOOK_APP_SECRET=${FACEBOOK_APP_SECRET}

# ===============================================
# MONITORING
# ===============================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9091
PROMETHEUS_PATH=/metrics
GRAFANA_URL=http://grafana:3000
GRAFANA_API_KEY=${GRAFANA_API_KEY}

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_FILE_ENABLED=true
LOG_FILE_PATH=/var/log/voutop/app.log
LOG_FILE_MAX_SIZE=10M
LOG_FILE_MAX_FILES=10

# ===============================================
# PERFORMANCE
# ===============================================
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
ENABLE_CACHE_HEADERS=true
CACHE_CONTROL_MAX_AGE=31536000
ENABLE_ETAG=true
ENABLE_CLUSTERING=true
CLUSTER_WORKERS=0

# ===============================================
# FEATURE FLAGS
# ===============================================
FEATURE_PWA_ENABLED=true
FEATURE_WEBGL_ENABLED=true
FEATURE_NOTIFICATIONS_ENABLED=true
FEATURE_REALTIME_ENABLED=true
FEATURE_OFFLINE_MODE=true
FEATURE_BETA_FEATURES=false

# ===============================================
# BACKUPS
# ===============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 3 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=voutop-backups
BACKUP_ENCRYPTION_KEY=${BACKUP_ENCRYPTION_KEY}

# ===============================================
# DEPLOYMENT
# ===============================================
DEPLOY_ENV=production
DEPLOY_REGION=us-east-1
DEPLOY_PROVIDER=aws
AUTO_SCALING_ENABLED=true
MIN_INSTANCES=2
MAX_INSTANCES=10
TARGET_CPU_UTILIZATION=70

# ===============================================
# VITE FRONTEND VARIABLES
# ===============================================
VITE_APP_ID=voutop-web-v1
VITE_APP_SECRET=${APP_SECRET}
VITE_API_URL=https://api.voutop.com
VITE_WS_URL=wss://ws.voutop.com
VITE_PUBLIC_URL=https://voutop.com
VITE_CDN_URL=https://cdn.voutop.com
VITE_ENABLE_PWA=true
VITE_ENABLE_ANALYTICS=true
VITE_SENTRY_DSN=${SENTRY_DSN}
VITE_GA_MEASUREMENT_ID=${GA_MEASUREMENT_ID}
